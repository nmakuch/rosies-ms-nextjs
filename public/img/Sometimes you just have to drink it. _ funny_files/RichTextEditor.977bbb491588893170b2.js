(window.webpackJsonp=window.webpackJsonp||[]).push([["RichTextEditor"],{"./src/lib/isSimpleClick/index.ts":function(e,t,n){"use strict";t.a=e=>{if(e&&e.target&&(e=>{let t=e;for(;t&&t!==window.document.body;){if("A"===t.nodeName)return!0;t=t.parentElement}return!1})(e.target)){if(e.ctrlKey)return!1;if(e.altKey)return!1;if(e.metaKey)return!1;if(e.shiftKey)return!1}return!0}},"./src/reddit/actions/economics/subredditPremium/thunkedActions.ts":function(e,t,n){"use strict";n("./node_modules/core-js/modules/web.dom.iterable.js");var o=n("./node_modules/lodash/forOwn.js"),r=n.n(o),s=n("./src/reddit/actions/governance/errorToast.ts"),a=n("./src/reddit/endpoints/economics/emojis.ts"),i=n("./src/reddit/endpoints/economics/specialMembership.ts"),c=n("./src/reddit/endpoints/economics/subredditPremium.ts"),d=n("./src/reddit/endpoints/governance/badges.ts"),l=n("./src/config.ts"),m=n("./src/reddit/endpoints/governance/requester.ts");function u(e,t,n){return Object(m.a)(e,{method:"get",endpoint:"".concat(l.a.metaUrl,"/products/").concat(t,"?owners=").concat(n)+"&types=emotes_pack,giphy"})}var p=n("./src/reddit/models/Badge/index.ts"),h=n("./src/reddit/models/Badge/managementPage.ts"),b=n("./src/reddit/models/Product/index.ts"),g=n("./src/reddit/reducers/economics/subredditPremium/index.ts"),f=n("./src/reddit/selectors/economics.ts"),x=n("./src/reddit/actions/economics/subredditPremium/actionCreators.ts");function C(e){return!!e&&"removeBadge"===e.type}function E(e){if(!C(e))return e}n.d(t,"a",(function(){return w})),n.d(t,"f",(function(){return v})),n.d(t,"b",(function(){return O})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return T})),n.d(t,"c",(function(){return j}));const w=()=>async(e,t,n)=>{let{apiContext:o}=n;const r=t().user.account,s=!t().economics.specialMemberships.allSubscriptionsFetched;if(r&&s){const t=await Object(i.b)(o());if(t.ok){e(Object(x.a)(t.body));const n=Object.keys(t.body);if(n.length){const t=await Object(i.f)(o(),n);t.ok&&e(Object(x.h)(t.body))}}}},v=(e,t)=>async(n,o,r)=>{let{apiContext:s}=r;const a=o().user.account,i=o().economics.subredditPremium[e],d=!i||i.status!==g.a.Fetched||t;if(a&&d){const t=await Object(c.a)(s(),e,a.id);n(Object(x.j)(t))}},O=e=>async(t,n,o)=>{let{apiContext:r}=o;const a=n(),i=a.user.account,c=Object(f.d)(a,e.subredditId),l=Object.keys(c).map(e=>c[e]).filter(Boolean);if(i&&e.badge){let n,o;n=e.placement===p.a.First?c[h.a.Loyalty]:e.placement===p.a.Second?c[h.a.Achievement]:c[h.a.Cosmetic],t(Object(x.b)(Object.assign({},e,{badge:E(e.badge),currentAppliedBadges:l,userId:i.id}))),C(e.badge)&&n?o=await Object(d.a)(r(),e.subredditId,n.id,!1):C(e.badge)||(o=await Object(d.a)(r(),e.subredditId,e.badge.id)),o&&!o.ok&&(t(Object(x.b)(Object.assign({},e,{badge:n,currentAppliedBadges:l,userId:i.id}))),Object(s.a)(t,o.error))}},y=(e,t)=>async(n,o,r)=>{let{apiContext:s}=r;await n(v(e,!0));const a=o().economics.subredditPremium[e];if(a&&a.status===g.a.Fetched){const o=a.data.userOwnedBadges.find(e=>e.type===t.id);o&&(n(O({badge:o,subredditId:e,placement:o.placement})),n(Object(x.e)(h.c.MyBadges)))}},T=e=>async(t,n,o)=>{let{apiContext:i}=o;const c=n().user.account,d=!n().economics.emotes[e],l=!n().economics.gifs[e];if(c&&(d||l)){const[n,o]=await Promise.all([Object(a.b)(i(),e),u(i(),e,c.id)]);if(!o.ok)return void Object(s.a)(t,o.error);const d={emotes:[],emoteCollections:n.ok?n.body:{},giphy:[]};r()(o.body,e=>{e.type===b.a.EmotesPack?d.emotes.push(e):e.type===b.a.Giphy&&d.giphy.push(e)}),t(Object(x.f)({subredditId:e,products:d}))}},j=(e,t,n)=>async(o,r,s)=>{let{apiContext:a}=s;if(await o(v(e,!0)),n&&t){const n=r(),s=Object(f.d)(n,e),a=n.products.models[t];if(!s[Object(h.d)(a.placement)]&&a){const t=Object(f.i)(n,{subredditId:e,badge:a});t&&await o(O({badge:t,subredditId:e}))}o(Object(x.d)({subredditId:e,initialView:h.c.MyBadges}))}}},"./src/reddit/components/CollapseIntoOverflow/index.m.less":function(e,t,n){e.exports={hidden:"_2x_bJPl7Q970NCRxOS36QB",innerWrapper:"_3oLr47tuKGv2mNpavCZ2X0",outerWrapper:"_1wi_3uF8fUynqe5reIop-G",overflowMenu:"_2aOuodBenLHlceR3j0AlIM",overflowMenuWrapper:"_3nQ7w1VIzZvzFawddOYgBC",row:"_2IirhjIkZ7hgWGtpr087xZ"}},"./src/reddit/components/CommentCreation/ExpandingFormDiv.m.less":function(e,t,n){e.exports={breakout:"_1VBLErIxAjOke05q8yLOyf"}},"./src/reddit/components/CommentCreation/ExpandingFormDiv.tsx":function(e,t,n){"use strict";n("./node_modules/core-js/modules/es6.symbol.js");var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./src/lib/classNames/index.ts"),a=n("./src/reddit/components/CommentCreation/ExpandingFormDiv.m.less"),i=n.n(a);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var d=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};const l=(e,t)=>21*e+33+(t?10:0);t.a=e=>{var{breakOut:t,depth:n,isEditing:o}=e,a=d(e,["breakOut","depth","isEditing"]);return r.a.createElement("div",c({className:Object(s.a)({[i.a.breakout]:t}),style:{left:l(n,o)}},a))}},"./src/reddit/components/CommentCreation/FormFooter/index.m.less":function(e,t,n){e.exports={SubmitButton:"_22S4OsoDdOqiM-hPTeOURa",submitButton:"_22S4OsoDdOqiM-hPTeOURa",LoadingIcon:"_2qsMO_C_HwxgUgktaOeqZ2",loadingIcon:"_2qsMO_C_HwxgUgktaOeqZ2",CancelButton:"cZz52cPDbNgzrR1Oo1k27",cancelButton:"cZz52cPDbNgzrR1Oo1k27",ButtonWrapper:"_3SNMf5ZJL_5F1qxcZkD0Cp",buttonWrapper:"_3SNMf5ZJL_5F1qxcZkD0Cp",FormFooterWrapper:"_17TqawK-44tH0psnHPIhzS",formFooterWrapper:"_17TqawK-44tH0psnHPIhzS",pending:"_5p2VqxvUAZTtPIXr7XU5p"}},"./src/reddit/components/CommentCreation/FormFooter/index.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./src/lib/classNames/index.ts"),a=n("./src/lib/lessComponent.tsx"),i=n("./src/reddit/controls/Button/index.tsx"),c=n("./src/reddit/controls/LoadingIcon/index.tsx"),d=n("./src/reddit/i18n/components.tsx"),l=n("./src/reddit/components/CommentCreation/FormFooter/index.m.less"),m=n.n(l);const u=a.a.div("FormFooterWrapper",m.a),p=a.a.wrapped(i.f,"SubmitButton",m.a),h=a.a.wrapped(c.a,"LoadingIcon",m.a),b=a.a.wrapped(i.i,"CancelButton",m.a),g=a.a.div("ButtonWrapper",m.a),f=e=>e.preventDefault();t.a=e=>{let{pending:t,cancelButtonEnabled:n=!0,children:o,className:a,submitButtonText:i,canSubmit:c,onSubmit:l,onCancel:x}=e;return r.a.createElement(u,{className:Object(s.a)(a,{[m.a.pending]:t})},r.a.createElement(g,null,r.a.createElement(p,{type:"submit",disabled:!c,onClick:l,onMouseDown:f},t?r.a.createElement(h,{sizePx:10}):i),n&&r.a.createElement(b,{type:"reset",disabled:t,onClick:x,onMouseDown:f},r.a.createElement(d.c,null,"cancel"))),o)}},"./src/reddit/components/CommentCreation/MarkdownCommentForm/MarkdownModeButton.m.less":function(e,t,n){e.exports={LoadingIcon:"_2DZnviMjaD88Udr-5V3j38",loadingIcon:"_2DZnviMjaD88Udr-5V3j38",Wrapper:"_3oZ5XBWSc3x7cXsvdt3fJ",wrapper:"_3oZ5XBWSc3x7cXsvdt3fJ",MarkdownModeIcon:"_1EifMLRAKpii4eqciAhY4q",markdownModeIcon:"_1EifMLRAKpii4eqciAhY4q",Button:"_1Q2Vq3gesOWZA73NbspEiQ",button:"_1Q2Vq3gesOWZA73NbspEiQ"}},"./src/reddit/components/CommentCreation/MarkdownCommentForm/index.m.less":function(e,t,n){e.exports={LoadingIcon:"_2izw1tRcQRvnfuR1E05Cy4",loadingIcon:"_2izw1tRcQRvnfuR1E05Cy4",CommentHeader:"PN-j_b1WdWATQha3fOgkV",commentHeader:"PN-j_b1WdWATQha3fOgkV",HelpButton:"MQruKnjMvMoDlmee_nF40",helpButton:"MQruKnjMvMoDlmee_nF40",SwitchModeButton:"_2UH-_HmB6X-2cCsOZVDtC5",switchModeButton:"_2UH-_HmB6X-2cCsOZVDtC5",FormHeaderText:"_1EQf9w-o91arfThHA8fn-N",formHeaderText:"_1EQf9w-o91arfThHA8fn-N",HelpIcon:"_3TI2tdRj3loY834ns393zu",helpIcon:"_3TI2tdRj3loY834ns393zu",Wrapper:"B0932G-wzdOKwoaSaKsKU",wrapper:"B0932G-wzdOKwoaSaKsKU",isTopLevelComment:"_3-O087Fe8Gpv51vkui03iG",FormWrapper:"_2LoNYeXgOQfq1adQ3jWSbi",formWrapper:"_2LoNYeXgOQfq1adQ3jWSbi",pending:"_1N53zdZlGyvjHMUoXkJa42",focused:"_2sPOgUISlhUYTMcHhUPCTP"}},"./src/reddit/components/CommentCreation/MarkdownCommentForm/index.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./node_modules/react-dom/index.js"),a=n("./node_modules/react-redux/es/index.js"),i=n("./node_modules/react-router/esm/react-router.js"),c=n("./node_modules/reselect/es/index.js"),d=n("./src/app/strings/index.ts"),l=n("./src/reddit/actions/comment/index.ts"),m=n("./src/reddit/components/AuthorLink/index.tsx"),u=n("./src/reddit/components/CommentCreation/NavigationModule/index.ts"),p=n("./src/reddit/components/CommentCreation/ToxicityWarningModal.tsx"),h=n("./src/reddit/components/ConfirmUserActionModal/index.tsx"),b=n("./src/reddit/components/MarkdownHelp/index.tsx"),g=n("./src/reddit/controls/ErrorText/index.tsx"),f=n("./src/reddit/controls/LoadingIcon/index.tsx"),x=n("./src/reddit/i18n/utils.ts"),C=n("./src/reddit/icons/svgs/Help/index.tsx"),E=n("./src/reddit/components/CommentCreation/ExpandingFormDiv.tsx"),w=n("./src/reddit/components/CommentCreation/FormFooter/index.tsx"),v=n("./src/lib/fastdom/index.ts"),O=n("./src/reddit/components/CommentCreation/ToolbarSelector.m.less"),y=n.n(O),T=n("./src/lib/lessComponent.tsx");const j=310,M=T.a.div("Container",y.a);class k extends r.a.Component{constructor(){super(...arguments),this.state={toolbarType:null},this.setContainerRef=e=>this.container=e,this.selectToolbar=()=>{const e=this.container&&this.container.parentElement;if(!e)return;const{width:t}=e.getBoundingClientRect(),n=t<j?"compact":"full";n!==this.state.toolbarType&&v.a.write(()=>{this.setState({toolbarType:n})})}}componentDidMount(){v.a.read(this.selectToolbar),window.addEventListener("resize",this.selectToolbar)}componentWillUnmount(){window.removeEventListener("resize",this.selectToolbar)}render(){return r.a.createElement(M,{innerRef:this.setContainerRef},this.state.toolbarType?this.props.children(this.state.toolbarType):null)}}var _=e=>r.a.createElement("svg",{className:e.className,viewBox:"0 0 208 128"},r.a.createElement("rect",{width:"198",height:"118",x:"5",y:"5",ry:"10",stroke:"currentColor",strokeWidth:"10",fill:"none"}),r.a.createElement("path",{d:"M30 98v-68h20l20 25 20-25h20v68h-20v-39l-20 25-20-25v39zM155 98l-30-33h20v-35h20v35h20z"})),S=n("./src/reddit/components/PostCreationForm/DivButton/index.tsx"),R=n("./src/reddit/components/RichTextEditor/HoverTooltip/index.tsx"),F=n("./src/reddit/components/CommentCreation/MarkdownCommentForm/MarkdownModeButton.m.less"),B=n.n(F);const I=Object(d.e)("comment.switchToRTE"),P=T.a.wrapped(f.a,"LoadingIcon",B.a),N=T.a.div("Wrapper",B.a),W=T.a.wrapped(_,"MarkdownModeIcon",B.a),H=T.a.wrapped(S.a,"Button",B.a);var A=e=>{const t=I(e.language);return r.a.createElement(N,null,r.a.createElement(H,{"aria-label":t,setRef:e.buttonRef,className:e.className,onClick:e.onClick},e.isConverting&&r.a.createElement(P,{sizePx:12}),r.a.createElement(R.a,{text:t}),!e.isConverting&&r.a.createElement(W,null)))},D=n("./src/lib/classNames/index.ts"),L=n("./src/reddit/constants/keycodes.ts"),z=n("./src/reddit/components/CommentCreation/getCancelModalId.ts"),U=n("./src/reddit/components/CommentCreation/translations.ts"),K=n("./src/reddit/constants/componentSizes.ts"),V=n("./src/reddit/constants/componentTestIds.ts"),q=n("./src/reddit/selectors/activeModalId.ts"),G=n("./src/reddit/selectors/comments.ts"),Q=n("./src/reddit/selectors/editorContent.ts"),X=n("./src/reddit/actions/modal.ts"),J=n("./src/reddit/components/ResizableAutosizeTextarea/index.tsx"),Z=n("./src/reddit/models/PostCreationForm/index.ts"),Y=n("./src/reddit/models/PostDraft/index.ts"),$=n("./src/reddit/models/User/index.ts"),ee=n("./src/reddit/components/CommentCreation/MarkdownCommentForm/index.m.less"),te=n.n(ee);n.d(t,"a",(function(){return ce}));const ne=T.a.button("SwitchModeButton",te.a),oe=T.a.wrapped(f.a,"LoadingIcon",te.a),re=T.a.div("CommentHeader",te.a),se=T.a.span("FormHeaderText",te.a),ae=T.a.button("HelpButton",te.a),ie=T.a.wrapped(C.a,"HelpIcon",te.a),ce=e=>r.a.createElement(ae,{className:e.className,onClick:e.onClick},r.a.createElement(ie,null)),de=8,le=16,me=T.a.div("Wrapper",te.a),ue=T.a.div("FormWrapper",te.a),pe=Object(a.b)(()=>Object(c.c)({activeModalId:q.a,userName:e=>e.user.account?Object($.f)(e.user.account):"",pending:(e,t)=>e.comments.submit.pending[t.draftKey],draft:G.i,isConverting:(e,t)=>Object(Q.a)(e,t.draftKey)}),(e,t)=>({cancelModalToggled:()=>e(Object(X.i)(Object(z.a)(t.draftKey))),helpModalToggled:()=>e(Object(X.i)(b.b))}));class he extends r.a.Component{constructor(e){super(e),this.textAreaRef=null,this.cancelForm=()=>{this.props.onCancel(),this.onBlur()},this.detectBreakout=()=>{if(!this.wrapperEl||!this.wrapperEl.parentElement||this.props.isTopLevelComment)return;const e=this.wrapperEl.parentElement.getBoundingClientRect().width<K.d,t=this.getWrapperHeight();e===this.state.breakOut&&t===this.state.wrapperHeight||v.a.write(()=>{this.setState({breakOut:e,wrapperHeight:t})})},this.focus=()=>{this.textAreaRef&&this.textAreaRef.focus()},this.onChange=e=>{const{value:t}=e.currentTarget;this.props.onChange&&this.props.onChange({text:t,editorState:null}),this.setState(()=>({text:t,hasChanged:!0,showError:!1}),()=>{v.a.read(this.detectBreakout)})},this.shouldConfirmCancel=()=>this.userHasEnteredText()&&this.state.hasChanged&&this.props.draftType===Y.c.edit,this.onCancel=()=>{this.shouldConfirmCancel()?this.props.cancelModalToggled():this.cancelForm()},this.onBlur=e=>{(!e||e&&e.relatedTarget!==this.switchModeBtn)&&(this.textAreaRef&&this.textAreaRef.blur(),this.props.onFocusChanged(!1))},this.onFocus=()=>{this.props.onFocus(),this.props.onFocusChanged(!0)},this.handleKeyDown=e=>{const{ctrlKey:t,metaKey:n,keyCode:o}=e;(t||n)&&o===L.a.Enter&&this.onSubmit()},this.onSubmit=()=>{this.props.onSubmit({commentMode:Z.h.MARKDOWN,draftType:this.props.draftType,editorState:null,text:this.getCurrentText(),validate:this.props.showWarningModal}),this.onBlur()},this.userHasEnteredText=()=>{const{text:e}=this.state;return!!e.trim()},this.setWrapperRef=e=>{this.wrapperEl=e,this.props.editorElementRef&&this.props.editorElementRef(e)},this.setTextAreaRef=e=>this.textAreaRef=e;const{draftType:t,hasError:n,initialText:o,language:r}=e;this.state={text:o||"",autofocusDisabled:!1,hasChanged:!1,showError:n,breakOut:!1,wrapperHeight:void 0,formHeight:null,cancelModalText:t===Y.c.edit?Object(d.a)(r,"comment.confirmCancellation.edit"):Object(d.a)(r,"comment.confirmCancellation.creation")}}componentDidMount(){this.props.onMount(),window.addEventListener("resize",this.detectBreakout),v.a.read(this.detectBreakout),v.a.write(()=>{this.props.draft.hasFocus&&this.textAreaRef&&this.textAreaRef.focus()}),this.props.instanceRef&&this.props.instanceRef(this)}componentWillUnmount(){this.props.onUnmount({text:this.getCurrentText()}),window.removeEventListener("resize",this.detectBreakout),this.props.instanceRef&&this.props.instanceRef(null)}componentDidUpdate(e){const t=e.pending,{hasError:n,pending:o}=this.props;t&&!o&&!n?this.setState({text:"",showError:!1}):e.hasError!==this.props.hasError&&this.setState({showError:this.props.hasError})}getCurrentText(){const{draft:e}=this.props,t=e&&e.text;return this.state.text||t}getWrapperHeight(){if(!this.textAreaRef)return;const e=Object(s.findDOMNode)(this.textAreaRef);return e instanceof Element?e.getBoundingClientRect().height+de+le+K.p:void 0}render(){const{activeModalId:e,autofocus:t,cancelModalToggled:n,className:o,disableAutofocus:s,depth:a,draft:i,draftKey:c,draftType:d,errorMsgs:f,pending:C,language:v,modalSeen:O,submitButtonText:y,isTopLevelComment:T,onSwitchMode:j,userName:M}=this.props,{cancelModalText:_,showError:S,text:R,breakOut:F,wrapperHeight:B}=this.state,I=Object(z.a)(c),P=i.draftType===Y.c.edit;return r.a.createElement(me,{"data-test-id":V.b,className:Object(D.a)(o,{[te.a.isTopLevelComment]:T}),ref:this.setWrapperRef,style:{height:F?B:void 0}},T&&r.a.createElement(re,null,r.a.createElement(se,null,"Comment as"),r.a.createElement(m.a,{author:M,isAdmin:!1,isAdminEmeritus:!1,isAuthorDeleted:!1,isMod:!1,isOp:!1},M)),r.a.createElement(E.a,{breakOut:F,depth:a,isEditing:P},r.a.createElement(ue,{className:Object(D.a)({[te.a.pending]:C,[te.a.focused]:i.hasFocus})},r.a.createElement(J.a,{innerRef:this.setTextAreaRef,autoFocus:t&&!s,disabled:C,initialHeight:this.props.initialHeight,onBlur:this.onBlur,onChange:this.onChange,onEditorResize:this.props.onEditorResize,onFocus:this.onFocus,onKeyDown:this.handleKeyDown,placeholder:Object(x.c)("What are your thoughts?"),value:R}),r.a.createElement(w.a,{cancelButtonEnabled:d!==Y.c.replyToPost,onSubmit:this.onSubmit,onCancel:this.onCancel,pending:C,submitButtonText:y,canSubmit:this.userHasEnteredText()},r.a.createElement(k,null,e=>"compact"===e?r.a.createElement(A,{language:v,buttonRef:e=>this.switchModeBtn=e,onClick:()=>j(Z.h.RICH_TEXT,R,c),isConverting:this.props.isConverting}):r.a.createElement("div",null,r.a.createElement(ne,{innerRef:e=>this.switchModeBtn=e,onClick:()=>j(Z.h.RICH_TEXT,R,c)},"Switch to Fancy Pants Editor",this.props.isConverting&&r.a.createElement(oe,{sizePx:12})))),r.a.createElement(ce,{onClick:this.props.helpModalToggled})))),S&&Object(g.c)(f),e===I&&r.a.createElement(h.a,{actionText:Object(U.a)(v),cancelActionText:Object(U.b)(v),modalText:_,onConfirm:()=>this.cancelForm(),toggleModal:n,trackClick:()=>{}}),e===b.b&&r.a.createElement(b.a,{language:v}),e===l.ob&&r.a.createElement(p.a,{onSubmit:this.onSubmit,modalSeen:O,withOverlay:!0}),r.a.createElement(u.a,{language:v,editKey:c,hasValue:!!R}))}}t.b=pe(Object(i.i)(he))},"./src/reddit/components/CommentCreation/NavigationModule/index.ts":function(e,t,n){"use strict";n("./node_modules/core-js/modules/web.dom.iterable.js");var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./node_modules/react-router/esm/react-router.js"),a=n("./src/app/strings/index.ts");let i=null;class c extends r.a.PureComponent{constructor(){super(...arguments),this.unblock=e=>{c.blockers.delete(e),c.blockers.size||(i&&i(),i=null,window.removeEventListener("beforeunload",c.navigationBlocker))}}componentDidUpdate(e){!e.hasValue&&this.props.hasValue?this.block(this.props.editKey):e.hasValue&&!this.props.hasValue&&this.unblock(this.props.editKey)}componentWillUnmount(){this.unblock(this.props.editKey)}componentDidMount(){this.props.hasValue&&this.block(this.props.editKey)}block(e){c.blockers.add(e),i||(window.addEventListener("beforeunload",c.navigationBlocker),i=this.props.history.block(()=>{const e=this.props.isPostEdit?Object(a.a)(this.props.language,"posts.confirmNavigation"):Object(a.a)(this.props.language,"comment.confirmNavigation");return window.confirm(e)?void 0:"Are you sure you want to leave?"}))}render(){return null}}c.blockers=new Set,c.navigationBlocker=e=>{const t="Are you sure you want to leave?";return e.returnValue=t,t},t.a=Object(s.i)(c)},"./src/reddit/components/CommentCreation/RequestToCommentForm/index.m.less":function(e,t,n){e.exports={RequestBox:"_2dVm83ugs7xhdLU8UptoxO",requestBox:"_2dVm83ugs7xhdLU8UptoxO",commentIcon:"_3-cqJ5aJH2EZKxhqY43T9D",commentText:"_2o9LnZvm1HYNaUjzmMO8E5",requestButton:"_3OvdD2phTivi0gnXR8NPl-"}},"./src/reddit/components/CommentCreation/RichtextCommentForm/index.m.less":function(e,t,n){e.exports={CommentHeader:"_2kZkQ13N-kvhDEJOBd1S1I",commentHeader:"_2kZkQ13N-kvhDEJOBd1S1I",FormFooter:"RQTXfVRnnTF5ont3w58rx",formFooter:"RQTXfVRnnTF5ont3w58rx",MarkdownButtonWrapper:"_3SWQgWX2fzvWmGCv463r_-",markdownButtonWrapper:"_3SWQgWX2fzvWmGCv463r_-",SectionSpacer:"_3rYrfakWyDh7Y1L9ULn4ve",sectionSpacer:"_3rYrfakWyDh7Y1L9ULn4ve",ToolbarWrapper:"_2YcMhGs5-uIg9Fj4a9J2Xr",toolbarWrapper:"_2YcMhGs5-uIg9Fj4a9J2Xr",FormWrapper:"_1r4smTyOEZFO91uFIdWW6T",formWrapper:"_1r4smTyOEZFO91uFIdWW6T",isTopLevelComment:"aUM8DQ_Nz5wL0EJc_wte6",MarkdownButton:"_1Wn5lpE9yF7YQX-XVL6AUI",markdownButton:"_1Wn5lpE9yF7YQX-XVL6AUI",FormHeaderText:"_2ucWAzao-GLL6qRJ4USwVJ",formHeaderText:"_2ucWAzao-GLL6qRJ4USwVJ"}},"./src/reddit/components/CommentCreation/ToolbarSelector.m.less":function(e,t,n){e.exports={Container:"_1XC-wMQsKPqfaPcfWQCZdW",container:"_1XC-wMQsKPqfaPcfWQCZdW"}},"./src/reddit/components/CommentCreation/ToxicityWarningModal.tsx":function(e,t,n){"use strict";var o=n("./src/higherOrderComponents/asModal/index.tsx"),r=n("./node_modules/react/index.js"),s=n.n(r),a=n("./node_modules/react-redux/es/index.js"),i=n("./node_modules/uuid/v4.js"),c=n.n(i),d=n("./src/reddit/actions/comment/index.ts"),l=n("./src/reddit/actions/modal.ts"),m=n("./src/reddit/components/ModalStyledComponents/index.tsx"),u=n("./src/reddit/components/TrackingHelper/index.tsx"),p=n("./src/reddit/controls/TextButton/index.tsx"),h=n("./src/reddit/constants/tracking.ts"),b=n("./src/reddit/selectors/telemetry.ts");const g=e=>Object.assign({source:"toxicity_modal"},b.defaults(e),{screen:b.screen(e),subreddit:b.subreddit(e)}),f=e=>t=>Object.assign({action:h.d.VIEW,noun:"modal",correlationId:e},g(t)),x=e=>t=>Object.assign({action:h.d.CLICK,noun:"submit",correlationId:e},g(t)),C=e=>t=>Object.assign({action:h.d.CLICK,noun:"edit",correlationId:e},g(t)),E=e=>t=>Object.assign({action:h.d.CLICK,noun:"close",correlationId:e},g(t));var w=n("./src/reddit/i18n/components.tsx"),v=n("./src/reddit/layout/twoCol/ExpandLeft/index.tsx");const O=Object(a.b)(null,(e,t)=>({closeModal:()=>{e(Object(l.g)(d.ob))},continue:()=>{t.onSubmit()}}));class y extends s.a.Component{constructor(e){super(e),this.state={correlationId:c()()}}componentDidMount(){this.props.modalSeen(),this.props.sendEvent(f(this.state.correlationId))}render(){return s.a.createElement(m.c,null,s.a.createElement(m.g,null,s.a.createElement(v.a,null,s.a.createElement(m.n,null,s.a.createElement(w.c,null,"Are you sure you want to post that?")),s.a.createElement(p.a,{onClick:()=>{this.props.sendEvent(E(this.state.correlationId)),this.props.closeModal()}},s.a.createElement(m.b,null)))),s.a.createElement(m.j,null,s.a.createElement(m.m,null,s.a.createElement(w.c,null,"A reminder from the mods: Please follow community rules when commenting."))),s.a.createElement(m.e,null,s.a.createElement(m.a,{onClick:()=>{this.props.sendEvent(C(this.state.correlationId)),this.props.closeModal()},"data-redditstyle":!0},s.a.createElement(w.c,null,"Go back and edit")),s.a.createElement(m.o,{onClick:()=>{this.props.sendEvent(x(this.state.correlationId)),this.props.continue()},"data-redditstyle":!0},s.a.createElement(w.c,null,"Comment"))))}}t.a=Object(o.a)(O(Object(u.b)(y)))},"./src/reddit/components/CommentCreation/getCancelModalId.ts":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=e=>"Comment-cancelModal__".concat(e)},"./src/reddit/components/CommentCreation/index.tsx":function(e,t,n){"use strict";n.r(t);var o=n("./node_modules/lodash/once.js"),r=n.n(o),s=n("./node_modules/react/index.js"),a=n.n(s),i=n("./node_modules/react-redux/es/index.js"),c=n("./node_modules/reselect/es/index.js"),d=n("./src/reddit/actions/comment/index.ts"),l=n("./src/reddit/helpers/trackers/commentsPage.ts"),m=n("./src/reddit/components/CommentCreation/MarkdownCommentForm/index.tsx"),u=n("./src/lib/lessComponent.tsx"),p=n("./src/reddit/components/ContributorRequestFlow/ContributorRequestButton.tsx"),h=n("./src/reddit/i18n/utils.ts"),b=n("./src/reddit/icons/fonts/Comment/index.tsx"),g=n("./src/reddit/models/SubredditRestrictions/index.ts"),f=n("./src/reddit/components/CommentCreation/RequestToCommentForm/index.m.less"),x=n.n(f);const C=u.a.div("RequestBox",x.a);var E=()=>a.a.createElement(C,null,a.a.createElement(b.a,{className:x.a.commentIcon}),a.a.createElement("div",{className:x.a.commentText},Object(h.c)("Only approved users can comment in this community.")),a.a.createElement(p.a,{className:x.a.requestButton,eventSource:g.b.Comment})),w=n("./node_modules/lodash/noop.js"),v=n.n(w),O=n("./src/lib/classNames/index.ts"),y=n("./src/lib/fastdom/index.ts"),T=n("./src/lib/memoizeByReference/index.ts"),j=n("./src/reddit/components/AuthorLink/index.tsx"),M=n("./src/reddit/components/ConfirmUserActionModal/index.tsx"),k=n("./src/reddit/actions/users.ts"),_=(n("./node_modules/core-js/modules/es6.symbol.js"),n("./src/reddit/icons/svgs/Close/index.tsx")),S=n("./src/reddit/controls/HelpfulTooltip/index.m.less"),R=n.n(S);function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var B=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n},I=e=>{const{className:t,children:n,text:o}=e,r=B(e,["className","children","text"]);return a.a.createElement("div",F({className:Object(O.a)(R.a.helpfulTooltip,t)},r),o?a.a.createElement("div",{className:R.a.tooltip},o,a.a.createElement("div",{className:R.a.iconWrapper},a.a.createElement(_.a,{className:R.a.close}))):null,n)};class P extends a.a.Component{componentDidUpdate(){const{onMarkdownModeFtuUxViewed:e,shouldShowFtuMessage:t}=this.props;t&&e()}render(){const{onClick:e,shouldShowFtuMessage:t}=this.props;return t&&a.a.createElement(I,{onClick:e,text:this.props.text})}}var N=Object(i.b)(null,e=>({onMarkdownModeFtuUxViewed:()=>e(Object(k.q)({commentForm:{markdownModeNotification:!0}}))}))(P),W=n("./src/reddit/components/RichTextEditor/index.tsx"),H=n("./src/reddit/components/RichTextEditor/styleAndBlockTypes.ts"),A=n("./src/reddit/components/RichTextEditor/helpers/controlsState.ts"),D=n("./src/reddit/components/OverflowMenu/index.tsx"),L=n("./src/reddit/components/CollapseIntoOverflow/index.m.less"),z=n.n(L);const U=33,K=e=>e.preventDefault(),V=e=>"Comment--Overflow-Dropdown__".concat(e),q=e=>e.reduce((e,t)=>(Array.isArray(t)?e+=t.length:t&&e++,e),0);class G extends a.a.Component{constructor(e){super(e),this.updateCurrentBreakpoint=()=>{y.a.read(()=>{if(!this.container)return;const{indexOfCurrentBreakpoint:e,totalNumCollapsibleItems:t}=this.state,n=this.container.clientWidth;let o=this.breakpoints.findIndex((e,o)=>{const r=o+1<t-1,s=this.breakpoints[o+1]+(r?U:0);return n<s});o<0&&(o=t-1),o!==e&&y.a.write(()=>{this.setState({indexOfCurrentBreakpoint:o,shouldShowOverflow:o<t-1})})})};const t=Array.isArray(e.children)?q(e.children):1;this.state={indexOfCurrentBreakpoint:t-1,shouldShowOverflow:!1,totalNumCollapsibleItems:t},this.breakpoints=[]}componentDidMount(){window.addEventListener("resize",this.updateCurrentBreakpoint)}componentWillUnmount(){window.removeEventListener("resize",this.updateCurrentBreakpoint)}registerBreakpoint(e,t){y.a.read(()=>{if(e&&e.clientWidth){const n=e.clientWidth;this.breakpoints[t]=0===t?n:this.breakpoints[t-1]+n,this.breakpoints[this.state.totalNumCollapsibleItems-1]&&this.updateCurrentBreakpoint()}})}render(){const{children:e,className:t,oveflowMenuDropdownId:n,onOverflowMenuClick:o,renderOverflowMenuTooltip:r}=this.props,{indexOfCurrentBreakpoint:s,shouldShowOverflow:i}=this.state,c=a.a.Children.toArray(e).filter(Boolean);return a.a.createElement("div",{className:Object(O.a)(z.a.outerWrapper,t),ref:e=>this.container=e},a.a.createElement("div",{className:z.a.innerWrapper},c.map((e,t)=>a.a.createElement("span",{className:t>s?z.a.hidden:void 0,key:t,ref:e=>this.registerBreakpoint(e,t)},e)),i&&a.a.createElement("div",{className:z.a.overflowMenuWrapper,key:"overflowMenuWrapper"},r&&r(),a.a.createElement(D.b,{className:z.a.overflowMenu,dropdownId:V(n),isFixed:!1,handleMouseDown:K,onClick:o},a.a.createElement("div",{className:z.a.row},c.map((e,t)=>a.a.createElement("span",{className:t<=s?z.a.hidden:void 0,key:t},e)))))))}}var Q=n("./src/reddit/components/RichTextEditor/Toolbar/index.tsx"),X=(n("./node_modules/core-js/modules/web.dom.iterable.js"),n("./src/reddit/icons/svgs/Smile/index.tsx")),J=n("./src/reddit/selectors/economics.ts"),Z=n("./src/reddit/components/RichTextEditor/Toolbar/FormatterButton/index.tsx"),Y=n("./src/reddit/components/RichTextEditor/Toolbar/EmoteButton/index.m.less"),$=n.n(Y);const ee=Object(c.c)({emotes:(e,t)=>{let{subredditId:n}=t;const o=Object(J.c)(e,n);if(o){const e=o.reduce((e,t)=>Object.assign({},e,t.emotes),{});return Object.keys(e).slice(0,3).map(t=>e[t])}return[]}});var te=Object(i.b)(ee)((function(e){const{controlsState:t,emotes:n,onEmoteButtonClick:o}=e;return a.a.createElement(Z.a,{Icon:()=>a.a.createElement(X.a,{className:$.a.smile}),tooltip:Object(h.c)("Add Emote"),enabled:t.emote.isEnabled,onClick:o},a.a.createElement("div",{className:Object(O.a)($.a.emotes,{[$.a.emoteMask]:n.length>1})},n.map(e=>a.a.createElement("img",{className:$.a.emote,key:e.id,src:e.emoji.path}))))})),ne=n("./src/reddit/icons/svgs/Gif/index.tsx"),oe=n("./src/reddit/components/RichTextEditor/Toolbar/formatterConfigs.tsx"),re=n("./src/reddit/components/RichTextEditor/Toolbar/GifButton/index.m.less"),se=n.n(re);const ae=Object(oe.f)(ne.a);var ie=function(e){const{controlsState:t,onGifButtonClick:n,userCanUseGifs:o}=e,r=t.giphy.isEnabled;return a.a.createElement(Z.a,{Icon:ae,className:r&&o?se.a.rainbow:"",tooltip:Object(h.c)("Add GIF"),disabledTooltip:Object(h.c)("Limit 1 GIF / comment"),enabled:r,onClick:n})},ce=n("./src/reddit/components/RichTextEditor/Toolbar/CommentToolbar.m.less"),de=n.n(ce);const le=u.a.div("SectionSpacer",de.a);var me=e=>{const{className:t,destSubreddit:n,editorKey:o,editorState:r,language:s,onChange:i,onEmoteButtonClick:c,onGifButtonClick:d,onOverflowMenuClick:l,readOnly:m,trackOnClick:u,onLinkButtonClick:p,userCanUseGifs:h}=e,b=Object(A.a)(r);m&&Object(A.b)(b);const g=n&&c,f=d&&a.a.createElement(ie,{controlsState:b,onGifButtonClick:d,userCanUseGifs:h});return a.a.createElement(G,{className:t,oveflowMenuDropdownId:o,onOverflowMenuClick:l},d&&h&&f,g&&a.a.createElement(te,{controlsState:b,subredditId:n&&n.id,onEmoteButtonClick:c}),d&&!h&&f,(g||d)&&a.a.createElement(le,null),Object(Q.g)(Q.f,b,r,i,u,s),a.a.createElement(Q.a,{language:s,controlsState:b,trackOnClick:u,onLinkButtonClick:p}),Object(Q.g)(Q.h,b,r,i,u,s),a.a.createElement(le,null),Object(Q.g)(Q.e,b,r,i,u,s),a.a.createElement(le,null),a.a.createElement(Q.d,{language:s,controlsState:b,editorState:r,trackOnClick:u,onChange:i}))},ue=n("./src/reddit/components/RichTextEditor/Toolbar/MarkdownButton/index.tsx"),pe=n("./src/reddit/constants/componentSizes.ts"),he=n("./src/reddit/constants/componentTestIds.ts"),be=n("./src/reddit/controls/ErrorText/index.tsx"),ge=n("./src/reddit/i18n/components.tsx"),fe=n("./src/reddit/components/CommentCreation/ExpandingFormDiv.tsx"),xe=n("./src/reddit/components/CommentCreation/FormFooter/index.tsx"),Ce=n("./src/reddit/components/CommentCreation/getCancelModalId.ts"),Ee=n("./src/reddit/components/CommentCreation/translations.ts"),we=n("./src/app/strings/index.ts"),ve=n("./src/reddit/models/PostCreationForm/index.ts"),Oe=n("./src/reddit/models/PostDraft/index.ts"),ye=n("./src/reddit/actions/modal.ts"),Te=n("./src/reddit/components/CommentCreation/NavigationModule/index.ts"),je=n("./src/reddit/components/CommentCreation/ToxicityWarningModal.tsx"),Me=n("./src/reddit/components/RichTextEditor/RTEState/index.tsx"),ke=n("./src/reddit/contexts/PageLayer/index.tsx"),_e=n("./src/reddit/contexts/PageLayer/selectors.ts"),Se=n("./src/reddit/helpers/richTextEditor/index.ts"),Re=n("./src/reddit/models/Subreddit/index.ts"),Fe=n("./src/reddit/selectors/activeModalId.ts"),Be=n("./src/reddit/selectors/comments.ts"),Ie=n("./src/reddit/selectors/user.ts"),Pe=n("./src/reddit/components/CommentCreation/RichtextCommentForm/index.m.less"),Ne=n.n(Pe);const We=Object(we.e)("comment.dontDigFancyPants"),He=16,Ae=u.a.div("FormWrapper",Ne.a),De=u.a.div("CommentHeader",Ne.a),Le=u.a.wrapped(xe.a,"FormFooter",Ne.a),ze=u.a.div("MarkdownButtonWrapper",Ne.a),Ue=u.a.wrapped(ue.a,"MarkdownButton",Ne.a),Ke=u.a.wrapped(le,"SectionSpacer",Ne.a),Ve=u.a.div("ToolbarWrapper",Ne.a),qe=u.a.span("FormHeaderText",Ne.a),Ge=e=>{let{cancelButtonEnabled:t,draftKey:n,onSubmit:o,onCancel:r,pending:s,submitButtonText:i}=e;return e=>{const{language:c,editorState:d,onFtuTooltipClick:l,onMarkdownButtonClick:m,shouldShowFtuMessage:u}=e,p=d.getCurrentContent(),h=!!p.getPlainText().trim()||p.getBlockMap().some(e=>!!e&&Object(H.t)(e.getType()));return a.a.createElement(Le,{cancelButtonEnabled:t,onSubmit:o,onCancel:r,pending:s,submitButtonText:i,canSubmit:h},a.a.createElement(Ve,null,a.a.createElement(me,e),a.a.createElement(Ke,null),a.a.createElement(ze,null,a.a.createElement(N,{onClick:l,shouldShowFtuMessage:!!u,text:We(c)}),a.a.createElement(Ue,{draftKey:n,language:c,onClick:m,shouldHideTooltip:u}))))}},Qe=Object(i.b)(()=>Object(c.c)({activeModalId:Fe.a,destSubreddit:(e,t)=>{const n=Object(_e.o)(e,t);return n?{name:n.name,isProfile:n.type===Re.b.User,id:n.id}:void 0},draft:Be.i,hasViewedMarkdownModeFtuUx:Ie.e,userCanUseGifs:(e,t)=>{const n=Object(_e.o)(e,t);return Object(J.q)(e,n?n.id:void 0,t.parentCommentId)}}),(e,t)=>({cancelModalToggled:()=>e(Object(ye.i)(Object(Ce.a)(t.draftKey)))}));class Xe extends a.a.Component{constructor(e){super(e),this.getToolbarRenderer=Object(T.a)((e,t,n,o)=>Ge({cancelButtonEnabled:e,draftKey:t,onSubmit:this.onSubmit,onCancel:this.onCancel,pending:n,submitButtonText:o})),this.focus=()=>{this.editor&&this.editor.focus()},this.setEditorWrapperRef=e=>{this.editorWrapperElement=e,this.props.editorElementRef&&this.props.editorElementRef(e)},this.setRTEComponentRef=e=>this.editor=e,this.setRTEDomElementRef=e=>{this.editorDomElement=e},this.detectBreakout=()=>{if(!this.editorWrapperElement||!this.editorWrapperElement.parentElement||this.props.isTopLevelComment)return;const e=this.editorWrapperElement.parentElement.getBoundingClientRect().width<pe.d,t=this.getWrapperHeight();e===this.state.breakOut&&t===this.state.formHeight||y.a.write(()=>{this.setState({breakOut:e,formHeight:t})})},this.hasContent=()=>{const{rteState:e}=this.state;return Me.a.hasContent(e)},this.handleBlur=()=>this.props.onFocusChanged(!1),this.handleFocus=()=>{this.props.onFocus(),this.props.onFocusChanged(!0)},this.handleChange=(e,t)=>{const{onChange:n}=this.props;n&&n({rteState:e}),t&&this.setState({hasChanged:!0}),this.setState(()=>({showError:!1,rteState:e}),()=>{y.a.read(this.detectBreakout)})},this.cancelForm=()=>{this.editor&&this.props.draftType===Oe.c.replyToPost&&this.setState({rteState:Me.a.createInitial()}),this.props.onCancel()},this.shouldConfirmCancel=()=>this.hasContent()&&this.state.hasChanged&&this.props.draftType===Oe.c.edit,this.onCancel=()=>{this.shouldConfirmCancel()?this.props.cancelModalToggled():this.cancelForm()},this.onSubmit=()=>{this.props.onSubmit({rteState:this.state.rteState,commentMode:ve.h.RICH_TEXT,draftType:this.props.draftType,validate:this.props.showWarningModal})},this.onSwitchEditorMode=(e,t)=>{this.props.onSwitchMode(e,t,this.props.draftKey)};const{draft:t,draftType:n,hasError:o,language:r,mediaMetadata:s,rtJson:a}=e;this.state={breakOut:!1,cancelModalText:n===Oe.c.edit?Object(we.a)(r,"comment.confirmCancellation.edit"):Object(we.a)(r,"comment.confirmCancellation.creation"),rteState:!a&&t&&t.rteState?t.rteState:Me.a.createInitial(a,s),formHeight:void 0,hasChanged:!1,showError:o}}componentWillReceiveProps(e){this.props.draft&&this.props.draft.rteState&&e.draft&&null===e.draft.rteState&&this.setState({rteState:Me.a.createInitial()}),e.hasError!==this.props.hasError&&this.setState({showError:e.hasError})}componentWillUnmount(){this.props.onUnmount({rteState:this.state.rteState}),window.removeEventListener("resize",this.detectBreakout),this.props.instanceRef&&this.props.instanceRef(null)}componentDidMount(){this.props.draft.hasFocus&&this.editor&&(window.addEventListener("resize",this.detectBreakout),y.a.read(this.detectBreakout),y.a.write(()=>{this.props.draft.hasFocus&&this.editor&&this.editor.focus()})),this.props.instanceRef&&this.props.instanceRef(this)}getWrapperHeight(){if(!this.editorDomElement)return;return this.editorDomElement.getBoundingClientRect().height+He}render(){const{activeModalId:e,cancelModalToggled:t,className:n,depth:o,destSubreddit:r,draft:s,draftKey:i,draftType:c,errorMsgs:l,hasViewedMarkdownModeFtuUx:m,language:u,modalSeen:p,pending:h,submitButtonText:b,isTopLevelComment:g,userCanUseGifs:f,userName:x}=this.props,{cancelModalText:C,breakOut:E,formHeight:w,rteState:y}=this.state,T=Object(Ce.a)(i),k=s.draftType===Oe.c.edit,_=c!==Oe.c.replyToPost;return a.a.createElement(Ae,{className:Object(O.a)(n,{[Ne.a.isTopLevelComment]:g}),ref:this.setEditorWrapperRef,style:{height:E?w:void 0}},g&&a.a.createElement(De,null,a.a.createElement(qe,null,a.a.createElement(ge.c,null,"Comment as")),a.a.createElement(j.a,{author:x,isAdmin:!1,isAdminEmeritus:!1,isAuthorDeleted:!1,isMod:!1,isOp:!1},x)),a.a.createElement(fe.a,{breakOut:E,depth:o,isEditing:k},a.a.createElement(W.a,{userCanUseGifs:f,dataTestId:he.c,destSubreddit:r,editorType:Se.a.Comment,enableFtuMessage:!m,initialHeight:this.props.initialHeight,rteState:y,rteRef:this.setRTEComponentRef,domRef:this.setRTEDomElementRef,language:u,onBlur:this.handleBlur,onEditorResize:this.props.onEditorResize,onFocus:this.handleFocus,onChange:this.handleChange,onSubmit:this.onSubmit,onSwitchEditorMode:this.onSwitchEditorMode,placeholderText:"What are your thoughts?",readOnly:h,trackToolbarClick:v.a,toolbarPosition:"bottom",renderToolbar:this.getToolbarRenderer(_,i,h,b)})),this.state.showError?Object(be.c)(l):null,e===T&&a.a.createElement(M.a,{actionText:Object(Ee.a)(u),cancelActionText:Object(Ee.b)(u),modalText:C,onConfirm:this.cancelForm,toggleModal:t,trackClick:v.a}),e===d.ob&&a.a.createElement(je.a,{onSubmit:this.onSubmit,modalSeen:p,withOverlay:!0}),a.a.createElement(Te.a,{language:u,editKey:i,hasValue:Me.a.hasContent(y)}))}}var Je=Object(ke.t)()(Qe(Xe)),Ze=n("./src/reddit/components/RequestPendingBanner/index.tsx"),Ye=n("./src/reddit/models/User/index.ts"),$e=n("./src/reddit/selectors/subreddit.ts");const et=Object(c.c)({activeModalId:Fe.a,contributorRequestPending:e=>Object($e.h)(e,g.e.Comment),language:Ie.S,userName:e=>e.user.account?Object(Ye.f)(e.user.account):"",pending:(e,t)=>e.comments.submit.pending[t.draftKey],hasError:Be.w,errorMsgs:Be.I,draft:Be.i,disableAutofocus:Be.f,showContributorRequestFlow:e=>Object($e.t)(e,g.e.Comment)}),tt=Object(i.b)(et,(e,t)=>({onMount:()=>e(d.H(t.draftKey)),onCancel:()=>{t.draftType===Oe.c.edit?e(d.T({commentId:t.parentCommentId,commentsPageKey:t.commentsPageKey})):e(d.N({parentCommentId:t.parentCommentId,commentsPageKey:t.commentsPageKey}))},onUnmount:n=>e(d.db(t.draftKey,n)),onFocus:r()(()=>e((e,n)=>Object(l.e)(n(),t.draftType))),onFocusChanged:n=>e(d.V({hasFocus:n,draftKey:t.draftKey})),onSwitchMode:(t,n,o)=>e(d.O(t,n,o)),dispatchSubmit:(n,o)=>{e(t.submitAction(n,o))}}),(e,t,n)=>Object.assign({},e,t,n,{onSubmit:n=>{t.dispatchSubmit(n,e.draft.commentMode)}}));t.default=tt(class extends a.a.Component{constructor(e){super(e),this.getInstanceRef=e=>this.formInstanceRef=e,this.onCancel=()=>{this.props.onCancel()},this.onSwitchMode=async(e,t,n)=>{await this.props.onSwitchMode(e,t,n),this.formInstanceRef&&this.formInstanceRef.focus()},this.onEditorResize=e=>{this.setState({editorHeight:e})},this.modalSeen=()=>{this.setState({showWarningModal:!1})},this.state={showWarningModal:!0}}componentDidUpdate(e){const t=e.pending,{hasError:n,pending:o}=this.props;t&&!o&&!n&&this.setState({showWarningModal:!0})}render(){const{props:e}=this,t=e&&e.draft&&e.draft.rtJson||e.rtJson||void 0,n={autofocus:e.autofocus||!1,className:e.className,depth:e.depth,disableAutofocus:e.disableAutofocus,draftKey:e.draftKey,draftType:e.draftType,editorElementRef:e.editorElementRef,errorMsgs:e.errorMsgs,initialHeight:this.state.editorHeight,instanceRef:this.getInstanceRef,hasError:e.hasError,language:e.language,modalSeen:this.modalSeen,onCancel:e.onCancel,onEditorResize:this.onEditorResize,onFocus:e.onFocus,onFocusChanged:e.onFocusChanged,onMount:e.onMount,onSubmit:e.onSubmit,onUnmount:e.onUnmount,parentCommentId:e.parentCommentId,pending:e.pending,rtJson:t,mediaMetadata:e.mediaMetadata,isTopLevelComment:e.isTopLevelComment,submitButtonText:e.submitButtonText,userName:e.userName,initialText:e.draft?e.draft.text:e.initialText||"",onSwitchMode:this.onSwitchMode,showWarningModal:this.state.showWarningModal};return e.contributorRequestPending?a.a.createElement(Ze.a,null):e.showContributorRequestFlow?a.a.createElement(E,null):e.draft.commentMode===ve.h.RICH_TEXT?a.a.createElement(Je,n):a.a.createElement(m.b,n)}})},"./src/reddit/components/CommentCreation/translations.ts":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s}));var o=n("./src/app/strings/index.ts");const r=Object(o.e)("comment.keep"),s=Object(o.e)("postCreation.discard.button");Object(o.e)("comment.confirmCancellation.creation")},"./src/reddit/components/InfoBanners/BannerBase/index.m.less":function(e,t,n){e.exports={IconWrapper:"_2p07tPrx9WpxDTQJ5cmVNe",iconWrapper:"_2p07tPrx9WpxDTQJ5cmVNe",TextWrapper:"_2jpm-rNr0Hniw6BX3NWMVe",textWrapper:"_2jpm-rNr0Hniw6BX3NWMVe",leftSideRectangle:"_3TLlMYjrPH9Kl9522LpSxb",wrapper:"_1DUKbp8va6vxOv9zemBDBi",subtitle:"_2J85dtk0HKQBLk8HTSWduv",title:"Nt8TnDvJ2BsL8KWcFQKy5"}},"./src/reddit/components/InfoBanners/BannerBase/index.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./src/lib/classNames/index.ts"),a=n("./src/reddit/components/InfoBanners/BannerBase/index.m.less"),i=n.n(a),c=n("./src/lib/lessComponent.tsx");const d=c.a.div("IconWrapper",i.a),l=c.a.div("TextWrapper",i.a);t.a=e=>{const{className:t,color:n,icon:o,subtitle:a,title:c}=e;return r.a.createElement("div",{className:Object(s.a)(t,i.a.wrapper),style:n&&{borderColor:n}||{}},r.a.createElement("div",{className:i.a.leftSideRectangle,style:n&&{backgroundColor:n}||{}}),o?r.a.createElement(d,null,o):r.a.createElement(d,null),r.a.createElement(l,null,r.a.createElement("div",{className:i.a.title},c),a&&r.a.createElement("div",{className:i.a.subtitle},a)))}},"./src/reddit/components/MarkdownHelp/index.m.less":function(e,t,n){e.exports={Section:"_1gF-JM2Md5QrEmUiEkRvLZ",section:"_1gF-JM2Md5QrEmUiEkRvLZ",Container:"C8uCM4XqGMA6xiIu7zfJl",container:"C8uCM4XqGMA6xiIu7zfJl",helpTable:"_3E7k-M4lVIYGW6Z7QoiPc9",Table:"_1t5z5ubOp-UUzTGLJr43d0",table:"_1t5z5ubOp-UUzTGLJr43d0",P:"_3MhMubukVABghyvZNN2X65",p:"_3MhMubukVABghyvZNN2X65"}},"./src/reddit/components/MarkdownHelp/index.tsx":function(e,t,n){"use strict";n.d(t,"b",(function(){return C}));var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./node_modules/react-redux/es/index.js"),a=n("./src/reddit/components/FlairPickerTitle/index.tsx"),i=n("./src/reddit/components/FlairPickerWrapper/index.tsx"),c=n("./src/reddit/components/RichTextJson/elements.tsx"),d=n("./src/reddit/components/RichTextJson/SpoilerText.tsx"),l=n("./src/reddit/components/TrackingHelper/index.tsx"),m=n("./src/higherOrderComponents/asModal/index.tsx"),u=n("./src/reddit/actions/modal.ts"),p=n("./src/reddit/controls/Button/index.tsx"),h=n("./src/reddit/layout/row/Inline/index.tsx"),b=n("./src/reddit/layout/row/RightAlign/index.tsx"),g=n("./src/reddit/components/MarkdownHelp/index.m.less"),f=n.n(g),x=n("./src/lib/lessComponent.tsx");const C="Markdown_Help__Modal",E=x.a.wrapped(h.a,"Section",f.a),w=x.a.div("Container",f.a),v=x.a.table("Table",f.a),O=x.a.p("P",f.a);class y extends r.a.Component{render(){return r.a.createElement(i.a,null,r.a.createElement(a.a,{onClosePressed:this.props.closeModal,title:"Markdown Help"}),r.a.createElement(w,null,r.a.createElement(v,{className:f.a.helpTable},r.a.createElement("tr",null,r.a.createElement(c.s,null,r.a.createElement(c.j,null,"Type this:")),r.a.createElement(c.s,null,r.a.createElement(c.j,null,"to get this:"))),r.a.createElement("tr",null,r.a.createElement(c.p,null,r.a.createElement(c.j,null,"*italics*")),r.a.createElement(c.p,null,r.a.createElement(c.f,null,"italics"))),r.a.createElement("tr",null,r.a.createElement(c.p,null,r.a.createElement(c.j,null,"**bold**")),r.a.createElement(c.p,null,r.a.createElement(c.b,null,"bold"))),r.a.createElement("tr",null,r.a.createElement(c.p,null,r.a.createElement(c.j,null,"[reddit!](https://reddit.com)")),r.a.createElement(c.p,null,r.a.createElement(c.a,{href:"https://www.reddit.com"},"reddit!"))),r.a.createElement("tr",null,r.a.createElement(c.p,null,r.a.createElement(c.j,null,"* item 1"),r.a.createElement(c.j,null,"* item 2"),r.a.createElement(c.j,null,"* item 3")),r.a.createElement(c.p,null,r.a.createElement(c.v,null,r.a.createElement(c.g,null,"item 1"),r.a.createElement(c.g,null,"item 2"),r.a.createElement(c.g,null,"item 3")))),r.a.createElement("tr",null,r.a.createElement(c.p,null,r.a.createElement(c.j,null,"> quoted text")),r.a.createElement(c.p,null,r.a.createElement(c.c,null,"quoted text"))),r.a.createElement("tr",null,r.a.createElement(c.p,null,r.a.createElement(c.j,null,"~~strikethrough~~")),r.a.createElement(c.p,null,r.a.createElement(c.d,null,"strikethrough"))),r.a.createElement("tr",null,r.a.createElement(c.p,null,r.a.createElement(c.j,null,"super^script")),r.a.createElement(c.p,null,"super",r.a.createElement(c.m,null,"script"))),r.a.createElement("tr",null,r.a.createElement(c.p,null,r.a.createElement(c.j,null,">!spoilers!<")),r.a.createElement(c.p,null,r.a.createElement(d.a,null,"spoilers")))),r.a.createElement(O,null,"Check the",r.a.createElement(c.a,{href:"https://www.reddit.com/wiki/commenting"}," commenting wiki page "),"for more help")),r.a.createElement(E,null,r.a.createElement(b.a,null,r.a.createElement(p.f,{onClick:this.props.closeModal,"data-redditstyle":!0},"Close"))))}}const T=Object(s.b)(null,(e,t)=>({closeModal:()=>e(Object(u.i)(C))}))(y);t.a=Object(m.a)(Object(l.b)(T))},"./src/reddit/components/PostCreationForm/MarkdownEditor/index.m.less":function(e,t,n){e.exports={LoadingIcon:"dyBWJSV5slC_6_q-avEAz",loadingIcon:"dyBWJSV5slC_6_q-avEAz",ModeDescription:"_2wjlEqW6Mz7pFfwBHVpPEA",modeDescription:"_2wjlEqW6Mz7pFfwBHVpPEA",ModeWrapper:"_2IWlVWhYLpVswet-ElQ9xx",modeWrapper:"_2IWlVWhYLpVswet-ElQ9xx",SwitchModeButton:"_2POD_tWc9UVvI3zBwPH9Yu",switchModeButton:"_2POD_tWc9UVvI3zBwPH9Yu",MarkdownHelpButton:"oqXBQCZarmL4V15c4Izxm",markdownHelpButton:"oqXBQCZarmL4V15c4Izxm",Toolbar:"_1HVLi6b9dq2O2gkgGAO1Fa",toolbar:"_1HVLi6b9dq2O2gkgGAO1Fa"}},"./src/reddit/components/PostCreationForm/MarkdownEditor/index.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/reselect/es/index.js"),i=n("./src/reddit/actions/postCreation/general.ts"),c=n("./src/reddit/components/CommentCreation/MarkdownCommentForm/index.tsx"),d=n("./src/reddit/components/FocusableContent/index.tsx"),l=n("./src/reddit/components/MarkdownHelp/index.tsx"),m=n("./src/reddit/components/PostCreationForm/Prompt/index.tsx"),u=n("./src/reddit/components/ResizableAutosizeTextarea/index.tsx"),p=n("./src/reddit/constants/keycodes.ts"),h=n("./src/reddit/controls/LoadingIcon/index.tsx"),b=n("./src/reddit/models/PostCreationForm/index.ts"),g=n("./src/reddit/selectors/activeModalId.ts"),f=n("./src/reddit/selectors/editorContent.ts"),x=n("./src/reddit/components/PostCreationForm/MarkdownEditor/index.m.less"),C=n.n(x),E=n("./src/lib/lessComponent.tsx");const w=E.a.wrapped(h.a,"LoadingIcon",C.a),v=E.a.span("ModeDescription",C.a),O=E.a.div("ModeWrapper",C.a),y=E.a.button("SwitchModeButton",C.a),T=E.a.wrapped(c.a,"MarkdownHelpButton",C.a),j=E.a.div("Toolbar",C.a),M=Object(a.c)({activeModalId:g.a,isConverting:e=>Object(f.a)(e)}),k=Object(s.b)(M,(e,t)=>({onChange:n=>{e(Object(i.c)(n)),t.onChange&&t.onChange(n)},helpModalToggled:()=>e(Object(i.y)(l.b)),switchToRTEModalToggled:()=>e(Object(i.y)(m.c))}));class _ extends r.a.Component{constructor(e){super(e),this.textAreaRef=null,this.onChange=e=>{const{value:t}=e.currentTarget;this.props.onChange(t)},this.onBlur=()=>{this.setState({isFocused:!1}),this.props.onBlur&&this.props.onBlur()},this.onFocus=()=>{const{onFocus:e}=this.props;e&&e(),this.setState({isFocused:!0})},this.handleKeyDown=e=>{const{ctrlKey:t,metaKey:n,keyCode:o}=e;(t||n)&&o===p.a.Enter&&this.props.onSubmit()},this.handleSwitchModeClick=()=>{this.props.value?this.props.switchToRTEModalToggled():this.props.onSwitchEditorMode(b.h.RICH_TEXT,this.props.value)},this.handleSwitchToRTEConfirm=()=>{this.props.switchToRTEModalToggled(),this.props.onSwitchEditorMode(b.h.RICH_TEXT,this.props.value)},this.setTextAreaRef=e=>this.textAreaRef=e,this.state={isFocused:!1}}componentDidMount(){const{instanceRef:e}=this.props;e&&e(this)}componentWillUnmount(){const{instanceRef:e}=this.props;e&&e(null)}focus(){this.textAreaRef&&this.textAreaRef.focus()}render(){const{className:e,isConverting:t,placeholderText:n,focusableContentMarkdownClassName:o,value:s}=this.props,{isFocused:a}=this.state;return r.a.createElement("div",{className:e},r.a.createElement(d.a,{className:o,isFocused:a},r.a.createElement(j,null,r.a.createElement(O,null,r.a.createElement(v,null,"Markdown"),r.a.createElement(T,{onClick:this.props.helpModalToggled})),r.a.createElement(y,{onClick:this.handleSwitchModeClick},t&&r.a.createElement(w,{sizePx:12}),"Switch to Fancy Pants Editor")),r.a.createElement(u.a,{disabled:!!this.props.disabled,initialHeight:this.props.initialHeight,innerRef:this.setTextAreaRef,onBlur:this.onBlur,onChange:this.onChange,onEditorResize:this.props.onEditorResize,onFocus:this.onFocus,onKeyDown:this.handleKeyDown,placeholder:n,value:s})),this.props.activeModalId===l.b&&r.a.createElement(l.a,{language:this.props.language}),this.props.activeModalId===m.c&&r.a.createElement(m.d,{modalId:m.c,onCancel:this.props.switchToRTEModalToggled,onConfirm:this.handleSwitchToRTEConfirm}))}}t.a=k(_)},"./src/reddit/components/PostCreationForm/Prompt/PromptModal.m.less":function(e,t,n){e.exports={PrimaryButton:"_35XIX8S5eAkigMxHxx98TS",primaryButton:"_35XIX8S5eAkigMxHxx98TS",ModalText:"_1ShPAP1uGnX3ZkiyNiigAA",modalText:"_1ShPAP1uGnX3ZkiyNiigAA"}},"./src/reddit/components/PostCreationForm/Prompt/PromptModal.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./src/higherOrderComponents/asModal/index.tsx"),a=n("./src/reddit/components/ModalStyledComponents/index.tsx"),i=n("./src/reddit/constants/keycodes.ts"),c=n("./src/reddit/controls/Button/index.tsx"),d=n("./src/reddit/controls/TextButton/index.tsx"),l=n("./src/reddit/layout/twoCol/ExpandLeft/index.tsx"),m=n("./src/reddit/components/PostCreationForm/Prompt/PromptModal.m.less"),u=n.n(m),p=n("./src/lib/lessComponent.tsx");const h=p.a.wrapped(c.f,"PrimaryButton",u.a),b=p.a.wrapped(a.m,"ModalText",u.a);class g extends r.a.PureComponent{constructor(){super(...arguments),this.handleEscapeKey=e=>{e.keyCode===i.a.Escape&&this.props.onClose()}}componentDidMount(){document.addEventListener("keydown",this.handleEscapeKey)}componentWillUnmount(){document.removeEventListener("keydown",this.handleEscapeKey)}render(){return r.a.createElement(a.c,null,r.a.createElement(a.g,null,r.a.createElement(l.a,null,r.a.createElement(a.n,null,this.props.titleText),r.a.createElement(d.a,{onClick:this.props.onClose},r.a.createElement(a.b,null)))),r.a.createElement(a.j,null,r.a.createElement(b,null,this.props.bodyText)),r.a.createElement(a.e,null,r.a.createElement(a.a,{onClick:this.props.onSecondaryAction},this.props.secondaryButtonText),r.a.createElement(h,{onClick:this.props.onPrimaryAction},this.props.primaryButtonText)))}}t.a=Object(s.a)(g)},"./src/reddit/components/PostCreationForm/Prompt/index.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return p}));var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/reselect/es/index.js"),i=n("./src/app/strings/index.ts"),c=n("./src/reddit/selectors/user.ts"),d=n("./src/reddit/components/PostCreationForm/Prompt/PromptModal.tsx");function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}const m="POST_CREATION__LOAD_DRAFT_MODAL_ID",u="POST_CREATION__MAX_DRAFTS_MODAL_ID",p="MARKDOWN_EDITOR__SWITCH_TO_RTE_MODAL_ID",h=(e,t)=>"postCreation.prompt.".concat(e,".").concat(t),b={body:h("default","body"),cancel:"postCreation.cancel",confirm:h("default","confirm"),title:h("default","title")},g=Object.assign({},b,{body:h("loadDraft","body"),confirm:h("loadDraft","confirm"),title:h("loadDraft","title")}),f=Object.assign({},b,{body:h("maxDrafts","body"),confirm:h("maxDrafts","confirm"),title:h("maxDrafts","title")}),x=Object.assign({},b,{body:h("switchToRTE","body"),confirm:h("switchToRTE","confirm"),title:h("switchToRTE","title")}),C={[m]:g,[u]:f,[p]:x},E=Object(a.c)({language:c.S}),w=Object(s.b)(E),v=(e,t)=>({bodyText:Object(i.a)(e,t.body),secondaryButtonText:Object(i.a)(e,t.cancel),primaryButtonText:Object(i.a)(e,t.confirm),titleText:Object(i.a)(e,t.title)});class O extends r.a.PureComponent{constructor(){super(...arguments),this.onCancel=()=>{this.props.onCancel(this.props.modalId)},this.onConfirm=()=>{this.props.onConfirm(this.props.modalId)}}render(){const{language:e,modalId:t}=this.props;return r.a.createElement(d.a,l({},v(e,C[t]),{onClose:this.onCancel,onPrimaryAction:this.onConfirm,onSecondaryAction:this.onCancel}))}}t.d=w(O)},"./src/reddit/components/PostEditForm/index.m.less":function(e,t,n){e.exports={BottomRow:"_2tvWRsxtXPamngfOz-62jr",bottomRow:"_2tvWRsxtXPamngfOz-62jr",errorMessages:"_19V2_W_A8aXNszBqWTITiK",Editor:"_8uW3gzV8WqahKv77o2EFu",editor:"_8uW3gzV8WqahKv77o2EFu",isPending:"_2UWKes5OMhB-Rz2iVtBdKZ",FormContent:"_2ISPYodbQ3VsImJAFvLFDJ",formContent:"_2ISPYodbQ3VsImJAFvLFDJ",SubmitButton:"_1N8wF0OCvBu6gW4b4cpHhE",submitButton:"_1N8wF0OCvBu6gW4b4cpHhE",LoadingIcon:"_1FY2h-rhaxwcBudiw3Lc2d",loadingIcon:"_1FY2h-rhaxwcBudiw3Lc2d"}},"./src/reddit/components/PostEditForm/index.tsx":function(e,t,n){"use strict";n.r(t);var o=n("./node_modules/lodash/noop.js"),r=n.n(o),s=n("./node_modules/react/index.js"),a=n.n(s),i=n("./node_modules/react-redux/es/index.js"),c=n("./node_modules/react-router-redux/es/index.js"),d=n("./src/reddit/i18n/components.tsx"),l=n("./node_modules/reselect/es/index.js"),m=n("./src/app/strings/index.ts"),u=n("./src/lib/classNames/index.ts"),p=n("./src/reddit/helpers/correlationIdTracker.ts"),h=n("./src/reddit/models/PostCreationForm/index.ts"),b=n("./src/reddit/models/PostRequirements/index.ts"),g=n("./src/reddit/selectors/postCreations.ts"),f=n("./src/reddit/actions/postCreation/editing.ts"),x=n("./src/reddit/actions/postCreation/editorContent.ts"),C=n("./src/reddit/components/CommentCreation/NavigationModule/index.ts"),E=n("./src/lib/constants/index.ts"),w=n("./src/lib/memoizeByReference/index.ts"),v=n("./src/reddit/components/RichTextEditor/media/helpers.ts");const O=Object(w.a)((e,t,n)=>{const o=e.name,{allowedPostTypes:r}=e,s=Object(v.g)(t),a=((e,t,n,o)=>{if(!t)return null;let r="";return!e.total||t.images||t.videos?e.video&&!t.videos?r="postCreation.mediaInput.videosAreNotAllowed":!e.image&&!e.gifvideo||t.images||(r="postCreation.mediaInput.imagesAreNotAllowed"):r="postCreation.mediaInput.mediaAreNotAllowed",r?Object(m.a)(o,r,{subredditName:n}):null})(s,r,o,n);return a?[a]:((e,t)=>{const n=[];return e.image>E.R&&n.push(Object(m.a)(t,"postCreation.mediaInput.imagesLimitExceeded")),e.video+e.gifvideo>E.V&&n.push(Object(m.a)(t,"postCreation.mediaInput.videosLimitExceeded")),n})(s,n)});var y=n("./src/reddit/components/PostCreationForm/MarkdownEditor/index.tsx"),T=n("./src/reddit/components/RichTextEditor/index.tsx"),j=n("./src/reddit/components/RichTextEditor/RTEState/index.tsx"),M=n("./src/reddit/contexts/PageLayer/index.tsx"),k=n("./src/reddit/controls/ErrorText/index.tsx"),_=n("./src/reddit/helpers/richTextEditor/index.ts"),S=n("./src/reddit/selectors/user.ts"),R=n("./src/reddit/controls/Button/index.tsx"),F=n("./src/reddit/controls/LoadingIcon/index.tsx"),B=n("./src/reddit/components/PostEditForm/index.m.less"),I=n.n(B),P=n("./src/lib/lessComponent.tsx");const N=Object(m.e)("postCreation.rtfPlaceholderOptional"),W=Object(m.e)("postCreation.rtfPlaceholderRequired"),H=P.a.div("BottomRow",I.a),A=P.a.div("FormContent",I.a),D=P.a.wrapped(R.f,"SubmitButton",I.a),L=P.a.wrapped(F.a,"LoadingIcon",I.a),z=Object(M.t)(),U=Object(l.c)({destSubreddit:g.g,editorMode:g.h,errorText:g.i,hasError:g.j,language:S.S,markdownDraft:g.k,pending:g.P,postRequirements:g.db,rteDraft:g.l,subreddit:M.q,uploads:e=>e.uploads,user:S.i}),K=Object(i.b)(U,(e,t)=>({onCancel:t=>e(f.b(t)),onSubmitDraft:t=>e(f.c(t)),onSuccess:t=>e(Object(c.b)(t)),onToggleEditorMode:(t,n)=>e(x.d(h.g.POST_EDITING,t,n))}));class V extends a.a.Component{constructor(e){super(e),this.onEditorResize=e=>{this.setState({editorHeight:e})},this.onMarkdownPostChange=e=>{const{markdownBody:t}=this.state,n=this.state.markdownPostDraftChanged||t.trim()!==e.trim();this.setState({markdownBody:e,markdownPostDraftChanged:n})},this.onRichPostChange=(e,t)=>{this.setState({rteState:e,richtextPostDraftChanged:this.state.richtextPostDraftChanged||t})},this.haveMarkdownPostDraft=()=>!!(this.state.markdownBody||"").trim(),this.haveDraft=()=>this.props.editorMode===h.h.RICH_TEXT?this.haveRichPostDraft():this.haveMarkdownPostDraft(),this.onSubmit=()=>{const e=this.buildPostSubmission();e&&this.props.onSubmitDraft(e)},this.onToggleEditorMode=async(e,t)=>{this.setState({markdownPostDraftChanged:!1,richtextPostDraftChanged:!1}),await this.props.onToggleEditorMode(e,t),e===h.h.RICH_TEXT?this.rteRef&&this.rteRef.focus():this.markdownEditorRef&&this.markdownEditorRef.focus()},this.getMediaValidationErrors=()=>{const{editorMode:e,destSubreddit:t,language:n}=this.props,{rteState:o}=this.state;return o.isBound&&e===h.h.RICH_TEXT?O(t,o.editorState.getCurrentContent(),n):[]},this.getTextPostContent=()=>{const{editorMode:e,uploads:t}=this.props,{markdownBody:n,rteState:o}=this.state;return e===h.h.RICH_TEXT?j.a.toRichTextJSON(o,t):{markdown:n}},this.buildPostSubmission=()=>{const{post:e}=this.props;return Object.assign({post:e},this.getTextPostContent(),{validate_on_submit:!0})},this.cancelEdit=()=>{this.props.onCancel(this.props.post.id)},this.setRteRef=e=>this.rteRef=e,this.setMarkdownEditorRef=e=>this.markdownEditorRef=e,this.state={markdownBody:e.markdownDraft,markdownPostDraftChanged:!1,richtextPostDraftChanged:!1,rteState:e.rteDraft}}componentDidMount(){Object(p.d)(p.a.PostComposer)}componentWillUnmount(){Object(p.b)(p.a.PostComposer),this.cancelEdit()}componentWillReceiveProps(e){e.rteDraft!==this.props.rteDraft&&this.setState({rteState:e.rteDraft,richtextPostDraftChanged:!0}),e.markdownDraft!==this.props.markdownDraft&&this.setState({markdownBody:e.markdownDraft,markdownPostDraftChanged:!0})}haveRichPostDraft(){const{rteState:e}=this.state;return j.a.hasContent(e)}hasChanged(){const{editorMode:e}=this.props,{markdownPostDraftChanged:t,richtextPostDraftChanged:n}=this.state;return e===h.h.RICH_TEXT?!!n:e===h.h.MARKDOWN&&!!t}render(){const{language:e,pending:t,editorMode:n,errorText:o,hasError:s,post:i,postRequirements:c,uploads:l}=this.props,{markdownBody:p,markdownPostDraftChanged:g,richtextPostDraftChanged:f,rteState:x}=this.state,E=c&&c.bodyRestrictionPolicy===b.a.Required?W(e):N(e),w=this.getMediaValidationErrors(),v=s?[o||Object(m.a)(e,"error.type.generic")]:w,O=!j.a.isAllMediaUploaded(x,l);return a.a.createElement(A,null,n===h.h.RICH_TEXT?a.a.createElement(T.a,{allowMediaUploads:!0,className:Object(u.a)(I.a.Editor,{[I.a.isPending]:!!t}),destSubreddit:this.props.destSubreddit,editorType:_.a.Post,initialHeight:this.state.editorHeight,rteState:x,language:e,onChange:this.onRichPostChange,onEditorResize:this.onEditorResize,onSubmit:this.onSubmit,onSwitchEditorMode:this.onToggleEditorMode,readOnly:!!t,rteRef:this.setRteRef,trackToolbarClick:r.a,placeholderText:E}):a.a.createElement(y.a,{language:e,initialHeight:this.state.editorHeight,instanceRef:this.setMarkdownEditorRef,disabled:!!t,value:p,onChange:this.onMarkdownPostChange,onEditorResize:this.onEditorResize,onSubmit:this.onSubmit,onSwitchEditorMode:this.onToggleEditorMode,placeholderText:E}),a.a.createElement(H,null,a.a.createElement(R.n,{disabled:!!t,onClick:this.cancelEdit},a.a.createElement(d.c,null,"cancel")),a.a.createElement(D,{disabled:!!t||!!w.length||!this.hasChanged()||O,onClick:this.onSubmit},t?a.a.createElement(L,{sizePx:10}):Object(m.a)(e,"posts.save"))),a.a.createElement(k.a,{className:I.a.errorMessages,messages:v}),a.a.createElement(C.a,{editKey:i.id,language:e,hasValue:!(!g&&!f),isPostEdit:!0}))}}t.default=z(K(V))},"./src/reddit/components/RequestPendingBanner/index.m.less":function(e,t,n){e.exports={Banner:"_1AD-JX9FUzLgvv8A5yaVqV",banner:"_1AD-JX9FUzLgvv8A5yaVqV",Subtitle:"_1ljRPHbvpC41amZF9_xBeb",subtitle:"_1ljRPHbvpC41amZF9_xBeb"}},"./src/reddit/components/RequestPendingBanner/index.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/reselect/es/index.js"),i=n("./src/lib/lessComponent.tsx"),c=n("./src/reddit/components/InfoBanners/BannerBase/index.tsx"),d=n("./src/reddit/i18n/utils.ts"),l=n("./src/reddit/models/SubredditRestrictions/index.ts"),m=n("./src/reddit/selectors/platform.ts"),u=n("./src/reddit/selectors/subreddit.ts"),p=n("./src/reddit/components/RequestPendingBanner/index.m.less"),h=n.n(p);const b=i.a.wrapped(c.a,"Banner",h.a),g=Object(s.b)(()=>Object(a.c)({restrictions:u.o,subreddit:m.f}));t.a=g(e=>{let{restrictions:t,subreddit:n}=e;if(!n)return null;const o=t===l.e.Comment?l.a.Create:l.a.Draft;return r.a.createElement(b,{subtitle:r.a.createElement("span",{className:h.a.Subtitle},Object(d.c)("Your request to ".concat(Object(d.b)("restrictions",l.d[t])," in r/").concat(Object(d.b)("displayName",n.name)," was sent and is pending. In the meantime, you can ").concat(Object(d.b)("action",l.c[o])," a post and ")),r.a.createElement("a",{href:"".concat(n.url)},Object(d.c)("browse the community"))),title:Object(d.c)("Request to ".concat(Object(d.b)("restrictions",l.d[t])," is pending..."))})})},"./src/reddit/components/ResizableAutosizeTextarea/index.m.less":function(e,t,n){e.exports={editorWrapper:"VBa-xDMEbFi3vsO4id4OC",textareaAutosize:"_6Ej82J4aTDK36LLOcpFbC",mIsFullHeight:"aZb6a46diyLdUQJynW3aD"}},"./src/reddit/components/ResizableAutosizeTextarea/index.tsx":function(e,t,n){"use strict";n("./node_modules/core-js/modules/es6.symbol.js");var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./node_modules/react-autosize-textarea/lib/index.js"),a=n.n(s),i=n("./src/lib/classNames/index.ts"),c=n("./src/reddit/components/ResizableAutosizeTextarea/index.m.less"),d=n.n(c);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var m=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};const u=e=>{let{className:t,children:n,editorWrapperRef:o,initialHeight:s}=e;return r.a.createElement("div",{className:Object(i.a)(d.a.editorWrapper,t),style:s?{height:s}:void 0,ref:o},n)},p=e=>{var{isFullHeight:t,textAreaRef:n}=e,o=m(e,["isFullHeight","textAreaRef"]);return r.a.createElement(a.a,l({className:Object(i.a)(d.a.textareaAutosize,{[d.a.mIsFullHeight]:t}),innerRef:n},o))};class h extends r.a.Component{constructor(e){super(e),this.editorHeight=null,this.editorRef=null,this.editorStyleMutationObserver=null,this.onEditorStyleChanged=()=>{if(!this.editorRef)return;const{isResized:e}=this.state;e||this.setState({isResized:!0});const t=this.editorRef.style.height?Number.parseInt(this.editorRef.style.height):null;this.editorHeight!==t&&(this.editorHeight=t,t&&this.props.onEditorResize&&this.props.onEditorResize(t))},this.setEditorWrapperRef=e=>this.editorRef=e,this.state={initialHeight:e.initialHeight,isResized:!!e.initialHeight}}componentDidMount(){this.editorRef&&(this.editorStyleMutationObserver=new MutationObserver(this.onEditorStyleChanged),this.editorStyleMutationObserver.observe(this.editorRef,{attributes:!0,attributeFilter:["style"]}))}componentWillUnmount(){this.editorStyleMutationObserver&&(this.editorStyleMutationObserver.disconnect(),this.editorStyleMutationObserver=null)}render(){const e=this.props,{className:t,initialHeight:n,innerRef:o,onEditorResize:s}=e,a=m(e,["className","initialHeight","innerRef","onEditorResize"]),{isResized:i}=this.state;return r.a.createElement(u,{className:t,editorWrapperRef:this.setEditorWrapperRef,initialHeight:n},r.a.createElement(p,l({},a,{children:!0,isFullHeight:!!i,textAreaRef:o})))}}t.a=h},"./src/reddit/components/RichTextEditor/Toolbar/CommentToolbar.m.less":function(e,t,n){e.exports={SectionSpacer:"_1_GKN8UW8t3pCAZhMgZOoL",sectionSpacer:"_1_GKN8UW8t3pCAZhMgZOoL"}},"./src/reddit/components/RichTextEditor/Toolbar/EmoteButton/index.m.less":function(e,t,n){e.exports={emote:"_3D93rMnM8022kmI5JTG4fb",emotes:"_2nE7oF1_HdWt-s31zYmYB6",emoteMask:"_26-n7Hn4ggLG2AJ7kmR8i6",smile:"kZEfwKUF_b6N-MPjQuYFA"}},"./src/reddit/components/RichTextEditor/Toolbar/GifButton/index.m.less":function(e,t,n){e.exports={rainbow:"_3o1yVY7yuN_Xzqg5RaAFp8",rainbowFade:"_3XlVOBsaD4vQFIAVPEpLFD"}},"./src/reddit/components/StructuredStyles/StyledComponents/forms.m.less":function(e,t,n){e.exports={FormPage:"_9ZuQyDXhFth1qKJF4KNm8",formPage:"_9ZuQyDXhFth1qKJF4KNm8",HomePageTitle:"_1JmnMJclrTwTPpAip5U_Hm",homePageTitle:"_1JmnMJclrTwTPpAip5U_Hm",HomePageBreadcrumb:"_2iNJX36LR2tMHx_unzEkVM",homePageBreadcrumb:"_2iNJX36LR2tMHx_unzEkVM",HomePageGroup:"_306gA2lxjCHX44ssikUp3O",homePageGroup:"_306gA2lxjCHX44ssikUp3O",FormPageTitle:"_1Omf6afKRpv3RKNCWjIyJ4",formPageTitle:"_1Omf6afKRpv3RKNCWjIyJ4",FormPageSection:"_2Ss7VGMX-UPKt9NhFRtgTz",formPageSection:"_2Ss7VGMX-UPKt9NhFRtgTz",FormGroup:"_3vWu4F9B4X4Yc-Gm86-FMP",formGroup:"_3vWu4F9B4X4Yc-Gm86-FMP",FormGroupTitle:"_2qAEe8HGjtHsuKsHqNCa9u",formGroupTitle:"_2qAEe8HGjtHsuKsHqNCa9u",FormElement:"c5RWd-O3CYE-XSLdTyjtI",formElement:"c5RWd-O3CYE-XSLdTyjtI",FormGroupDescription:"_3whORKuQps-WQpSceAyHuF",formGroupDescription:"_3whORKuQps-WQpSceAyHuF",FormItem:"_1Qk-ka6_CJz1fU3OUfeznu",formItem:"_1Qk-ka6_CJz1fU3OUfeznu",FormElementTitle:"_3ds8Wk2l32hr3hLddQshhG",formElementTitle:"_3ds8Wk2l32hr3hLddQshhG",FormElementDescription:"_1h0r6vtgOzgWtu-GNBO6Yb",formElementDescription:"_1h0r6vtgOzgWtu-GNBO6Yb",FormElementError:"horIoLCod23xkzt7MmTpC",formElementError:"horIoLCod23xkzt7MmTpC",FormElementSubGroup:"_33Iw1wpNZ-uhC05tWsB9xi",formElementSubGroup:"_33Iw1wpNZ-uhC05tWsB9xi",FormListItem:"_2M7LQbQxH40ingJ9h9RslL",formListItem:"_2M7LQbQxH40ingJ9h9RslL"}},"./src/reddit/components/StructuredStyles/StyledComponents/forms.ts":function(e,t,n){"use strict";n.d(t,"k",(function(){return a})),n.d(t,"p",(function(){return i})),n.d(t,"n",(function(){return c})),n.d(t,"o",(function(){return d})),n.d(t,"m",(function(){return l})),n.d(t,"l",(function(){return m})),n.d(t,"f",(function(){return u})),n.d(t,"h",(function(){return p})),n.d(t,"a",(function(){return h})),n.d(t,"g",(function(){return b})),n.d(t,"i",(function(){return g})),n.d(t,"e",(function(){return f})),n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return C})),n.d(t,"d",(function(){return E})),n.d(t,"j",(function(){return w}));var o=n("./src/lib/lessComponent.tsx"),r=n("./src/reddit/components/StructuredStyles/StyledComponents/forms.m.less"),s=n.n(r);const a=o.a.section("FormPage",s.a),i=o.a.h1("HomePageTitle",s.a),c=o.a.button("HomePageBreadcrumb",s.a),d=o.a.div("HomePageGroup",s.a),l=o.a.h1("FormPageTitle",s.a),m=o.a.div("FormPageSection",s.a),u=o.a.div("FormGroup",s.a),p=o.a.h2("FormGroupTitle",s.a),h=o.a.div("FormElement",s.a),b=o.a.div("FormGroupDescription",s.a),g=o.a.div("FormItem",s.a),f=o.a.h3("FormElementTitle",s.a),x=o.a.div("FormElementDescription",s.a),C=o.a.div("FormElementError",s.a),E=o.a.div("FormElementSubGroup",s.a),w=o.a.li("FormListItem",s.a)},"./src/reddit/components/Widgets/ThemedWidget/index.m.less":function(e,t,n){e.exports={widgetBackground:"_1G4yU68P50vRZ4USXfaceV",clickable:"_2mtWlchu4uQf339v56bSha",redditStyle:"_2QeqBqfT5UbHBoViZUt-wX",truncatedGradient:"_1lvCNVth3dt5y8lu3vT95L",widgetHeader:"_ZhON3a3vplThB8NFwuJn",headerExp:"_1kKGybsCNXyvQc_qJCQIQe",widgetTitle:"_2sggAEfRQLyoAl4J__5twU",widgetContent:"TmgZY6tDcdErbE5d7E0HJ",widgetContentOnly:"_3RPJ8hHnfFohktLZca18J6",truncated:"r5dzQq7dgZyAmve8abbbt",seeMore:"_3dbp6Cm9uKkkIBr9EsU-qS"}},"./src/reddit/components/Widgets/ThemedWidget/index.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/reselect/es/index.js"),i=n("./src/lib/classNames/index.ts"),c=n("./src/lib/CSSVariableProvider/withTheme.tsx"),d=n("./src/reddit/components/SEOTitle/index.tsx"),l=n("./src/reddit/components/TrackingHelper/index.tsx"),m=n("./src/reddit/contexts/PageLayer/index.tsx"),u=n("./src/reddit/controls/Button/index.tsx"),p=n("./src/reddit/selectors/telemetry.ts");const h=(e,t)=>n=>Object.assign({source:"community_widgets",action:"click",noun:"see_more",widget:Object(p.widget)(n,{subredditId:e,widgetKind:t})},p.defaults);var b=n("./src/reddit/i18n/components.tsx"),g=n("./src/reddit/selectors/experiments/feedFilters.ts"),f=n("./src/reddit/selectors/experiments/topPosts.ts"),x=n("./src/reddit/selectors/structuredStyles.ts"),C=n("./src/reddit/selectors/user.ts"),E=n("./src/reddit/models/Theme/index.ts"),w=n("./src/reddit/models/Theme/NewColorSystem/index.ts");const v=e=>e.styles&&e.styles.backgroundColor?e.styles.backgroundColor:Object(w.a)(e).widgetColors.sidebarWidgetBackgroundColor,O=e=>e.styles&&e.styles.headerColor?e.styles.headerColor:Object(w.a)(e).widgetColors.sidebarWidgetHeaderColor,y=e=>{const t=v(e);return Object(E.f)(t)},T=e=>{const t=O(e);return Object(E.f)(t)};var j=n("./src/reddit/components/Widgets/ThemedWidget/index.m.less"),M=n.n(j);const k=Object(m.t)(),_=Object(s.b)(()=>Object(a.c)({feedFilterVariant:g.a,forceRedditStyle:(e,t)=>{const n=Object(m.m)(e,t)||void 0,o=t.redditStyle||Object(x.m)(e,{subredditId:n}),r=Object(C.U)(e);return o||r},subredditId:m.m,topPostVariant:f.d}));class S extends r.a.Component{constructor(){super(...arguments),this.contentRef=r.a.createRef(),this.state={isTruncated:!1},this.handleSeeMoreClick=()=>{const{subredditId:e,widgetKind:t}=this.props;e&&t&&this.props.sendEvent(h(e,t)),this.setState({isTruncated:!1})}}componentDidMount(){const e=this.contentRef.current,t=e&&e.offsetHeight;this.props.truncateThreshold&&t&&t>this.props.truncateThreshold&&this.setState({isTruncated:!0})}getWidgetBackgroundStyles(){const e={};return e.backgroundColor=v(this.props),e.color=e.fill=y(this.props),e}getWidgetHeaderStyles(){const e={};return e.backgroundColor=O(this.props),e.color=e.fill=T(this.props),e}render(){const{children:e,className:t,contentOnly:n,feedFilterVariant:o,forceRedditStyle:s,headerButton:a,onClick:c,title:l,topPostVariant:m,truncateThreshold:p}=this.props,h=n?M.a.widgetContentOnly:M.a.widgetContent,f=Object(g.f)(o),x=!!m,C=!s&&this.props.styles&&!f&&!x,E=C?this.getWidgetBackgroundStyles():{},w=C?this.getWidgetHeaderStyles():{};return r.a.createElement("div",{className:Object(i.a)(t,M.a.widgetBackground,{[M.a.redditStyle]:s,[M.a.clickable]:!!c,[M.a.truncatedGradient]:this.state.isTruncated&&!this.props.noGradient}),"data-redditstyle":s,onClick:c,style:E},l&&r.a.createElement("div",{className:Object(i.a)(M.a.widgetHeader,{[M.a.headerExp]:f||x}),style:w},r.a.createElement("div",{className:Object(i.a)(M.a.widgetTitle,{[M.a.headerExp]:f||x})},r.a.createElement(d.b,{type:d.a.Widget},l)),a),r.a.createElement("div",{className:Object(i.a)(h,{[M.a.truncated]:this.state.isTruncated}),ref:this.contentRef,style:{maxHeight:this.state.isTruncated?p:"none"}},e),this.state.isTruncated&&r.a.createElement(u.n,{className:M.a.seeMore,onClick:this.handleSeeMoreClick},r.a.createElement(b.c,null,"See More")))}}t.a=k(_(Object(c.a)(Object(l.b)(S))))},"./src/reddit/constants/accountManager.ts":function(e,t,n){"use strict";var o,r,s;n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return s})),function(e){e.ChangePassword="/change_password/",e.Index="/login/",e.Register="/register/",e.EnableTwoFactor="/2fa/enable/",e.DisableTwoFactor="/2fa/disable/",e.TwoFactorBackupCodes="/2fa/backup-keys/"}(o||(o={})),function(e){e.ChangePassword="changePassword",e.Close="close",e.CreateAccount="createAccount",e.Login="login",e.Register="register",e.Resize="resize",e.Subscribe="subscribe",e.TwoFactorChanged="twoFactorChanged"}(r||(r={})),function(e){e.Embed="embed",e.Modal="modal"}(s||(s={}))},"./src/reddit/controls/HelpfulTooltip/index.m.less":function(e,t,n){e.exports={iconWrapper:"_2jhMYYIyWfC22MBJXfjc_j",close:"Ox8QhMwI_pG4DcRAicFqa",tooltip:"_3ks0MaOGG46svtYF11UgzA",fadeIn:"G_Qeda7XitCcKYjxHAP-D",helpfulTooltip:"_3bxQwDiY1JejDtESIEAiwn"}},"./src/reddit/controls/ToggleSwitch/index.m.less":function(e,t,n){e.exports={toggleDisplay:"_2FKpII1jz0h6xCAw1kQAvS",toggleSwitch:"_2e2g485kpErHhJQUiyvvC2",mActive:"_1L5kUnhRYhUJ4TkMbOTKkI",mDisabled:"_3clF3xRMqSWmoBQpXv8U5z"}},"./src/reddit/controls/ToggleSwitch/index.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./src/lib/classNames/index.ts"),a=n("./src/reddit/controls/ToggleSwitch/index.m.less"),i=n.n(a);t.a=e=>r.a.createElement("button",{"aria-checked":e.on,className:Object(s.a)(i.a.toggleSwitch,e.className,{[i.a.mActive]:e.on&&!e.disabled,[i.a.mDisabled]:e.disabled}),style:e.on&&!e.disabled&&e.activeColorOverride?{backgroundColor:e.activeColorOverride}:void 0,id:e.id,role:"switch",tabIndex:e.tabIndex,type:"button",onClick:()=>!e.disabled&&e.onToggle&&e.onToggle()},r.a.createElement("div",{className:i.a.toggleDisplay}))},"./src/reddit/endpoints/economics/emojis.ts":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}));var o=n("./src/config.ts"),r=n("./src/reddit/endpoints/governance/requester.ts");const s=(e,t)=>Object(r.a)(e,{method:"post",endpoint:"".concat(o.a.metaUrl,"/orders"),data:{price:"0",currency:"usd",products:[{productId:t.productId,quantity:"1"}],subredditId:t.subredditId}}),a=(e,t)=>Object(r.a)(e,{method:"get",endpoint:"".concat(o.a.metaUrl,"/product-collections/").concat(t,"?types=emotes_pack")})},"./src/reddit/endpoints/economics/specialMembership.ts":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return m})),n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return p}));var o=n("./src/config.ts"),r=n("./src/lib/omitHeaders/index.ts"),s=n("./src/reddit/constants/headers.ts"),a=n("./src/reddit/endpoints/governance/requester.ts"),i=n("./src/reddit/helpers/r2/normalizeSubredditFromR2/index.ts");function c(e,t){return Object(a.a)(e,{endpoint:"".concat(o.a.metaUrl,"/communities/").concat(t.subredditId,"/me"),method:"patch",data:{specialMemberships:{settings:{renew:!1}}}})}function d(e){return Object(a.a)(e,{endpoint:"".concat(o.a.metaUrl,"/users/me"),method:"get"}).then(e=>e.ok?e.body.specialMemberships?Object.assign({},e,{body:e.body.specialMemberships}):Object.assign({},e,{body:{}}):e)}function l(e,t){return Object(a.a)(e,{endpoint:"".concat(o.a.metaUrl,"/ps/me/braintree-client-tokens"),method:"post",data:{username:t&&t.username}})}function m(e,t){return Object(a.a)(e,{endpoint:"".concat(o.a.metaUrl,"/orders"),method:"post",data:{currency:"usd",orderTarget:"special_membership",price:t.trial?"0":t.price,products:[{productId:t.trial?"trial_membership":"membership",quantity:"1"}],providerArgs:{paymentNonce:t.nonce,savePaymentMethod:!0},providerName:"braintree",subredditId:t.subredditId,targetArgs:{renew:!0,receiverName:t.username}}})}function u(e,t){return Object(a.a)(e,{endpoint:"".concat(o.a.metaUrl,"/orders"),method:"post",data:{currency:"usd",orderTarget:"special_membership",price:t.price,products:[{productId:"membership",quantity:t.numMonths}],providerArgs:{paymentNonce:t.nonce,savePaymentMethod:!1},providerName:"braintree",subredditId:t.subredditId,targetArgs:{renew:!1},recipientUserName:t.recipientUsername,anonymousGift:t.isAnonymous}})}function p(e,t){return Object(a.a)(Object(r.a)(e,[s.a]),{endpoint:"".concat(e.apiUrl,"/api/info?id=").concat(t.join(",")),method:"get"}).then(e=>{if(e.ok){const t=e.body.data.children.map(e=>{let{data:t}=e;return Object(i.a)(t)}).reduce((e,t)=>(e[t.id]=t,e),{});return Object.assign({},e,{body:t})}return e})}},"./src/reddit/endpoints/economics/subredditPremium.ts":function(e,t,n){"use strict";n("./node_modules/core-js/modules/web.dom.iterable.js");var o=n("./node_modules/lodash/merge.js"),r=n.n(o),s=n("./src/config.ts"),a=n("./src/reddit/endpoints/governance/badges.ts"),i=n("./src/reddit/endpoints/governance/community.ts"),c=n("./src/reddit/endpoints/governance/products/badges.ts"),d=n("./src/reddit/endpoints/governance/requester.ts");async function l(e,t,n){const o={subredditId:t,badges:{},errors:{},collections:{},products:{},subscription:void 0,userOwnedBadges:[]},l=function(e,t){return Object(d.a)(e,{method:"get",endpoint:"".concat(s.a.metaUrl,"/product-collections/").concat(t,"?types=badge")})}(e,t),m=Object(i.a)(e,{subredditId:t}),u=Object(c.a)(e,t),p=Object(a.c)(e,t,n),[h,b,g,f]=await Promise.all([l,m,u,p]);if(h.ok?o.collections=h.body:o.errors.collections=h.error,b.ok){const e=b.body;o.subscription=e.specialMemberships,o.communityRaw=e}return g.ok?o.products=g.body:o.errors.products=g.error,f.ok?(r()(o.badges,f.body.badges),o.userOwnedBadges=f.body.userOwnedBadges):o.errors.userBadges=f.error,o}n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return m}));const m=(e,t)=>Object(d.a)(e,{endpoint:"".concat(s.a.metaUrl,"/products/").concat(t,"?types=badge,membership"),method:"delete"})},"./src/reddit/helpers/trackers/monthsToMinutes.ts":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return m})),n.d(t,"h",(function(){return u})),n.d(t,"g",(function(){return h})),n.d(t,"f",(function(){return b}));var o=n("./src/reddit/selectors/subreddit.ts"),r=n("./src/reddit/selectors/telemetry.ts");const s=e=>Object.assign({},r.defaults(e),{actionInfo:r.actionInfo(e,{settingValue:"top_banner"}),noun:"account_complete",source:"banner"}),a=()=>e=>Object.assign({},s(e),{action:"view"}),i=e=>t=>Object.assign({},s(t),{action:"click",banner:{id:e,buttonText:e}}),c=e=>Object.assign({},r.defaults(e),{source:"community_manager"}),d=e=>t=>Object.assign({},c(t),{action:"click",noun:"subreddit_name",subreddit:{id:Object(o.G)(t,e),name:e}}),l=e=>t=>Object.assign({},c(t),{action:"click",noun:"remove_subreddit",subreddit:{id:Object(o.G)(t,e),name:e}}),m=()=>e=>Object.assign({},r.defaults(e),{action:"click",noun:"sign_up",source:"id_card"}),u=e=>t=>Object.assign({},r.defaults(t),{action:"click",noun:e,source:"community_nav"}),p=e=>Object.assign({},r.defaults(e),{noun:"starter_home",source:"banner"}),h=()=>e=>Object.assign({},p(e),{action:"view"}),b=()=>e=>Object.assign({},p(e),{action:"click",actionInfo:r.actionInfo(e,{reason:"close"})})},"./src/reddit/icons/fonts/Coin/index.m.less":function(e,t,n){e.exports={CoinIcon:"_12xlue8dQ1odPw1J81FIGQ",coinIcon:"_12xlue8dQ1odPw1J81FIGQ"}},"./src/reddit/icons/fonts/Coin/index.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./src/reddit/constants/colors.ts"),a=n("./src/reddit/icons/fonts/helpers.tsx"),i=n("./src/reddit/icons/fonts/Coin/index.m.less"),c=n.n(i);const d=n("./src/lib/lessComponent.tsx").a.wrapped(e=>r.a.createElement("i",{className:"".concat(Object(a.b)("coin")," ").concat(e.className),style:{color:e.fillColor||s.a.gold}}),"CoinIcon",c.a);t.a=d},"./src/reddit/icons/svgs/ChevronDown/index.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o);t.a=e=>r.a.createElement("svg",{className:e.className,viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",onClick:e.onClick},r.a.createElement("g",null,r.a.createElement("polygon",{fill:"inherit",points:"11.0584 4.0602 6.0292 9.0894 1 4.0602 2.0608 3 6.0292 6.9684 9.9982 3"})))},"./src/reddit/icons/svgs/FormattingOrderedList/index.m.less":function(e,t,n){e.exports={icon:"_1fQOXfyxB1SmgMOi7sihQV"}},"./src/reddit/icons/svgs/FormattingOrderedList/index.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./src/lib/classNames/index.ts"),a=n("./src/reddit/icons/svgs/FormattingOrderedList/index.m.less"),i=n.n(a);t.a=e=>r.a.createElement("svg",{className:Object(s.a)(i.a.icon,e.className),style:e.style,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M4.78,5.15H4.15V2H3.09a1,1,0,0,1-.73.25V3a1.84,1.84,0,0,0,.7-.17V5.15H2.35V6H4.78Z"}),r.a.createElement("path",{d:"M3.62,8.88c.25,0,.39.12.39.35s-.17.41-.77.78c-1,.63-1.15,1.21-1.15,1.78V12H5v-.85H3.31c.06-.16.22-.35.72-.64.81-.43,1-.87,1-1.32C5,8.47,4.58,8,3.65,8A1.76,1.76,0,0,0,2.08,9l.72.52A1.07,1.07,0,0,1,3.62,8.88Z"}),r.a.createElement("path",{d:"M4.43,15.87A.82.82,0,0,0,5,15.05C5,14.4,4.53,14,3.65,14a2.15,2.15,0,0,0-1.51.61l.55.64a1.24,1.24,0,0,1,.88-.39c.27,0,.41.12.41.32s-.15.38-.67.38H3v.72h.31c.53,0,.76.13.76.46s-.15.42-.57.42a1.05,1.05,0,0,1-.85-.5L2,17.21A1.83,1.83,0,0,0,3.57,18c.94,0,1.55-.43,1.55-1.24A.87.87,0,0,0,4.43,15.87Z"}),r.a.createElement("path",{d:"M17,9H8a1,1,0,0,0,0,2h9a1,1,0,0,0,0-2Z"}),r.a.createElement("path",{d:"M17,15H8a1,1,0,0,0,0,2h9a1,1,0,0,0,0-2Z"}),r.a.createElement("path",{d:"M8,5h9a1,1,0,0,0,0-2H8A1,1,0,0,0,8,5Z"}))},"./src/reddit/icons/svgs/Gif/index.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o);t.a=e=>r.a.createElement("svg",{className:e.className,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.78413 14.5651C4.76663 14.6972 6.07763 14.7 8 14.7C9.92237 14.7 11.2334 14.6972 12.2159 14.5651C13.161 14.4381 13.6052 14.2132 13.9092 13.9092C14.2132 13.6052 14.4381 13.161 14.5651 12.2159C14.6972 11.2334 14.7 9.92237 14.7 8C14.7 6.07763 14.6972 4.76663 14.5651 3.78413C14.4381 2.83903 14.2132 2.3948 13.9092 2.09081C13.6052 1.78682 13.161 1.56192 12.2159 1.43485C11.2334 1.30276 9.92237 1.3 8 1.3C6.07763 1.3 4.76663 1.30276 3.78413 1.43485C2.83903 1.56192 2.3948 1.78682 2.09081 2.09081C1.78682 2.3948 1.56192 2.83903 1.43485 3.78413C1.30276 4.76663 1.3 6.07763 1.3 8C1.3 9.92237 1.30276 11.2334 1.43485 12.2159C1.56192 13.161 1.78682 13.6052 2.09081 13.9092C2.3948 14.2132 2.83903 14.4381 3.78413 14.5651ZM1.17157 1.17157C0 2.34315 0 4.22876 0 8C0 11.7712 0 13.6569 1.17157 14.8284C2.34315 16 4.22876 16 8 16C11.7712 16 13.6569 16 14.8284 14.8284C16 13.6569 16 11.7712 16 8C16 4.22876 16 2.34315 14.8284 1.17157C13.6569 0 11.7712 0 8 0C4.22876 0 2.34315 0 1.17157 1.17157Z"}),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.76197 6.36433L6.03894 7.11365C5.7183 6.79814 5.32849 6.7127 5.03299 6.7127C4.31625 6.7127 3.851 7.15966 3.851 8.06015C3.851 8.65172 4.1465 9.38132 5.03299 9.38132C5.26562 9.38132 5.63028 9.33531 5.88177 9.1447V8.55313H4.76893V7.53432H6.91915V9.57851C6.64252 10.1635 5.87548 10.479 5.02671 10.479C3.28515 10.479 2.625 9.26301 2.625 8.06015C2.625 6.8573 3.37946 5.62158 5.03299 5.62158C5.64285 5.62158 6.18355 5.75304 6.76197 6.36433ZM9.02735 10.3541H7.78877V5.75304H9.02735V10.3541ZM11.3179 10.3541H10.0856V5.75304H13.4618V6.84415H11.3179V7.70521H13.3298V8.77004H11.3179V10.3541Z"}))},"./src/reddit/icons/svgs/Help/index.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o);t.a=e=>r.a.createElement("svg",{className:e.className,viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fill:"inherit",d:"M8.622 10.616c.078.08.14.175.183.28.044.105.07.218.07.332 0 .237-.087.456-.253.62-.167.168-.385.255-.622.255-.236 0-.455-.087-.62-.254-.167-.166-.255-.385-.255-.622 0-.114.027-.227.07-.332.044-.105.105-.2.184-.28.087-.088.174-.15.288-.193.324-.13.71-.052.954.193zm-.205-6.242c1.595 0 2.466.807 2.466 1.92 0 .976-.556 1.448-1.238 1.816-.615.317-.83.518-.904.898 0 .004-.034.207-.036.21-.034.126-.087.244-.18.336-.14.14-.323.21-.524.21-.097 0-.192-.017-.29-.052-.087-.035-.165-.088-.235-.158-.14-.14-.22-.333-.22-.533 0-.11.02-.188.074-.348.16-.472.55-.896 1.056-1.17.577-.327.84-.558.84-1.07 0-.42-.357-.715-.987-.715-.496 0-.996.218-1.39.52-.26.2-.62.202-.858-.02l-.05-.05c-.313-.29-.27-.787.075-1.04.603-.444 1.394-.753 2.4-.753zM8 13.25c-2.895 0-5.25-2.355-5.25-5.25S5.105 2.75 8 2.75 13.25 5.105 13.25 8 10.895 13.25 8 13.25M8 1C4.14 1 1 4.14 1 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7"}))},"./src/reddit/icons/svgs/Smile/index.tsx":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),r=n.n(o);t.a=e=>r.a.createElement("svg",{className:e.className,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},r.a.createElement("path",{fill:"inherit",fillRule:"evenodd",d:"M13 9.0074c-.777 0-1.406-.63-1.406-1.406 0-.777.629-1.407 1.406-1.407.777 0 1.406.63 1.406 1.407 0 .776-.629 1.406-1.406 1.406m-3 5.581c-2.206 0-4-1.57-4-3.5 0-.276.224-.5.5-.5h7c.276 0 .5.224.5.5 0 1.93-1.794 3.5-4 3.5m-3-8.394c.777 0 1.406.63 1.406 1.407 0 .776-.629 1.406-1.406 1.406-.777 0-1.406-.63-1.406-1.406 0-.777.629-1.407 1.406-1.407m3-4.194c-4.411 0-8 3.588-8 8 0 4.411 3.589 8 8 8s8-3.589 8-8c0-4.412-3.589-8-8-8"}))},"./src/reddit/layout/row/RightAlign/index.m.less":function(e,t,n){e.exports={rightAligned:"_1sEFSGIUpFtX1hzGDyWJpr"}},"./src/reddit/layout/row/RightAlign/index.tsx":function(e,t,n){"use strict";var o=n("./src/lib/lessComponent.tsx"),r=n("./src/reddit/layout/row/RightAlign/index.m.less"),s=n.n(r);t.a=o.a.div("rightAligned",s.a)}}]);
//# sourceMappingURL=RichTextEditor.977bbb491588893170b2.js.map