(window.webpackJsonp=window.webpackJsonp||[]).push([["InFeedChaining"],{"./src/reddit/components/DiscoveryUnit/CarouselBase/index.m.less":function(e,t,s){e.exports={arrow:"_22LJahVHZg-w-Ok4e54Ekf",arrowIcon:"_2vWDDpepKDRWqekB9vJEi"}},"./src/reddit/components/DiscoveryUnit/CarouselBase/index.tsx":function(e,t,s){"use strict";var i=s("./node_modules/lodash/values.js"),r=s.n(i),a=s("./node_modules/react/index.js"),n=s.n(a),o=s("./src/lib/classNames/index.ts"),c=s("./src/reddit/constants/colors.ts");const l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"".concat(t,"-du-left-").concat(e)};var d=e=>{const{seed:t=""}=e,s=l("a",t),i=l("b",t),r=l("c",t),a=l("d",t);return n.a.createElement("svg",{className:e.className,onClick:e.onClick,viewBox:"4 0 45 45",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},n.a.createElement("defs",null,n.a.createElement("circle",{id:i,cx:"18",cy:"18",r:"18"}),n.a.createElement("filter",{id:s,x:"-33.3%",y:"-25%",width:"166.7%",height:"166.7%"},n.a.createElement("feOffset",{dy:"3",in:"SourceAlpha",result:"shadowOffsetOuter1"}),n.a.createElement("feGaussianBlur",{in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),n.a.createElement("feColorMatrix",{in:"shadowBlurOuter1",values:"0 0 0 0 0.101960784 0 0 0 0 0.101960784 0 0 0 0 0.105882353 0 0 0 0.3 0"})),n.a.createElement("path",{id:r,d:"M12 8a.798.798 0 0 1-.566-.234L8 4.33 4.566 7.766a.8.8 0 1 1-1.132-1.132l4-4a.8.8 0 0 1 1.132 0l4 4A.8.8 0 0 1 12 8zm0 4.8a.798.798 0 0 1-.566-.234L8 9.13l-3.434 3.435a.8.8 0 1 1-1.132-1.132l4-4a.8.8 0 0 1 1.132 0l4 4A.8.8 0 0 1 12 12.8z"})),n.a.createElement("g",{fill:"none",fillRule:"evenodd"},n.a.createElement("g",{fillRule:"nonzero",transform:"matrix(-1 0 0 1 43 4)"},n.a.createElement("use",{fill:c.a.black,filter:"url(#".concat(s,")"),xlinkHref:"#".concat(i)}),n.a.createElement("use",{fill:c.a.white,xlinkHref:"#".concat(i)})),n.a.createElement("g",{transform:"matrix(0 1 1 0 17.174 14.174)"},n.a.createElement("path",{d:"M0 16h16V0H0z"}),n.a.createElement("mask",{id:a,fill:c.a.white},n.a.createElement("use",{xlinkHref:"#".concat(r)})),n.a.createElement("use",{fill:c.a.black,xlinkHref:"#".concat(r)}),n.a.createElement("g",{fill:c.a.alienblue,mask:"url(#".concat(a,")")},n.a.createElement("path",{d:"M0 0h16v16H0z"})))))};const m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"".concat(t,"-du-right-").concat(e)};var p=e=>{const{seed:t=""}=e,s=m("a",t),i=m("b",t),r=m("c",t),a=m("d",t);return n.a.createElement("svg",{className:e.className,onClick:e.onClick,viewBox:"4 0 45 45",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},n.a.createElement("defs",null,n.a.createElement("circle",{id:i,cx:"18",cy:"18",r:"18"}),n.a.createElement("filter",{id:s,x:"-33.3%",y:"-25%",width:"166.7%",height:"166.7%"},n.a.createElement("feOffset",{dy:"3",in:"SourceAlpha",result:"shadowOffsetOuter1"}),n.a.createElement("feGaussianBlur",{in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),n.a.createElement("feColorMatrix",{in:"shadowBlurOuter1",values:"0 0 0 0 0.101960784 0 0 0 0 0.101960784 0 0 0 0 0.105882353 0 0 0 0.3 0"})),n.a.createElement("path",{id:r,d:"M12 8a.798.798 0 0 1-.566-.234L8 4.33 4.566 7.766a.8.8 0 1 1-1.132-1.132l4-4a.8.8 0 0 1 1.132 0l4 4A.8.8 0 0 1 12 8zm0 4.8a.798.798 0 0 1-.566-.234L8 9.13l-3.434 3.435a.8.8 0 1 1-1.132-1.132l4-4a.8.8 0 0 1 1.132 0l4 4A.8.8 0 0 1 12 12.8z"})),n.a.createElement("g",{fill:"none",fillRule:"evenodd"},n.a.createElement("g",{fillRule:"nonzero",transform:"translate(7 4)"},n.a.createElement("use",{fill:c.a.black,filter:"url(#".concat(s,")"),xlinkHref:"#".concat(i)}),n.a.createElement("use",{fill:c.a.white,xlinkHref:"#".concat(i)})),n.a.createElement("g",{transform:"rotate(90 9.326 23.5)"},n.a.createElement("path",{d:"M0 16h16V0H0z"}),n.a.createElement("mask",{id:a,fill:c.a.white},n.a.createElement("use",{xlinkHref:"#".concat(r)})),n.a.createElement("use",{fill:c.a.black,xlinkHref:"#".concat(r)}),n.a.createElement("g",{fill:c.a.alienblue,mask:"url(#".concat(a,")")},n.a.createElement("path",{d:"M0 0h16v16H0z"})))))},u=s("./src/reddit/components/DiscoveryUnit/CarouselBase/index.m.less"),h=s.n(u);s.d(t,"a",(function(){return b})),s.d(t,"b",(function(){return C}));const b=e=>n.a.createElement("button",{className:Object(o.a)(h.a.arrow,e.className),onClick:e.onClick},n.a.createElement(d,{className:h.a.arrowIcon,seed:e.seed})),C=e=>n.a.createElement("button",{className:Object(o.a)(h.a.arrow,e.className),onClick:e.onClick},n.a.createElement(p,{className:h.a.arrowIcon,seed:e.seed}));class x extends n.a.Component{constructor(e){super(e),this.state={scrollIndex:0,viewableItems:{},visibleItemsCount:null},this.makeVisibilityChangeHandler=e=>t=>{this.setState({viewableItems:Object.assign({},this.state.viewableItems,{[e]:t.isIntersecting&&t.intersectionRatio>=.99})})},this.getVisibleItemsCount=()=>{return r()(this.state.viewableItems).reduce((e,t)=>e+(t?1:0),0)},this.getMaxScrollIndex=e=>null!=e&&this.props.items?this.props.items.length-e:null,this.getSpacerCount=e=>e+1,this.getMarginLeft=e=>{let{adjustment:t,itemWidth:s,scrollIndex:i,spacerWidth:r=0}=e;return t-i*(s+r)+r},this.itemsFitInContainer=e=>{let{container:t,items:s,itemWidth:i,spacerWidth:r=0}=e;if(!t)return!0;const a=s.length*i,n=this.getSpacerCount(s.length)*r;return t.offsetWidth>=a+n},this.getAdjustment=e=>{let{itemWidth:t,maxScrollIndex:s,scrollIndex:i,spacerWidth:r=0,visibleItemsCount:a}=e,n=0;if(i===s&&a){const e=a*t+this.getSpacerCount(a)*r;n=(this.container?this.container.offsetWidth:e)-e}else i>0&&(n=0);return n},this.setContainerRef=e=>{this.container=e},this.id="",this.onClickNext=this.onClickNext.bind(this),this.onClickPrev=this.onClickPrev.bind(this)}componentDidMount(){const e=this.getVisibleItemsCount();this.setState({visibleItemsCount:e})}onClickNext(){const e=this.getVisibleItemsCount(),t=this.getMaxScrollIndex(e),s=Math.max(1,e),i=Math.min(this.state.scrollIndex+s,t);this.setState({scrollIndex:i,visibleItemsCount:e})}onClickPrev(){const e=this.getVisibleItemsCount(),t=Math.max(1,e),s=Math.max(0,this.state.scrollIndex-t);this.setState({scrollIndex:s,visibleItemsCount:e})}}t.c=x},"./src/reddit/components/DiscoveryUnit/InFeedChaining/Post/constants.ts":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));const i=236},"./src/reddit/components/DiscoveryUnit/InFeedChaining/index.m.less":function(e,t,s){e.exports={container:"_3ecQI6Cj7AUan8ODNedckX",carousel:"_3iT7bTTSmhcS5Y5g0HA_6O",containerVisible:"_3rsj8PUqTkCf6pe9416Gyy",expand:"_250lv3fevotwjop-AocHoR",fadeIn:"_3ZZS9kQ22NEA4xZZYY0spW",layout:"_3h7LpVpRI9GJtQIvq99wXT",header:"_1BBGDcB7hA6-TZL0ttf8GW",title:"_1fjygDYdKjBJL0LwqMGbmi",subredditLink:"_3U4JOEplD94U2FGR06uT9j",description:"_1963n3Yxcv9NC7ip9v_G55",overflow:"_3-Jj2CfWoB4geanC8TePf3",overflowDropdown:"cfnCFp3MEBqCBFKNqYCKh",overflowItemIconWrapper:"_1n_xSjRDa84SL-VXSHRa_b",hideIcon:"_1qgpARPT0gQIpbWQmCrZx9",body:"_2LVnfX2Exeku8qbknNjlSc",carouselVisible:"swB-w41jlb9yWuRozt8Wr",arrow:"_33n6Hxno5QDQIbv7MzWYA6"}},"./src/reddit/components/DiscoveryUnit/InFeedChaining/index.tsx":function(e,t,s){"use strict";s.r(t);var i=s("./node_modules/polished/dist/polished.es.js"),r=s("./node_modules/react/index.js"),a=s.n(r),n=s("./node_modules/react-redux/es/index.js"),o=s("./node_modules/reselect/es/index.js"),c=s("./src/lib/classNames/index.ts"),l=s("./src/lib/constants/index.ts"),d=s("./src/lib/CSSVariableProvider/withTheme.tsx"),m=s("./src/reddit/actions/inFeedChaining.ts"),p=s("./src/reddit/components/DiscoveryUnit/Layout/PostsCarousel/index.tsx"),u=s("./src/reddit/components/OverflowMenu/index.tsx"),h=s("./src/reddit/components/TrackingHelper/index.tsx"),b=s("./src/reddit/controls/Dropdown/Row.tsx"),C=s("./src/reddit/controls/InternalLink/index.tsx"),x=s("./src/reddit/helpers/name/index.ts"),v=s("./src/reddit/helpers/overlay/index.ts"),f=s("./src/reddit/helpers/trackers/discoveryUnit.ts"),g=s("./src/reddit/i18n/components.tsx"),w=s("./src/reddit/i18n/utils.ts"),y=s("./src/reddit/icons/svgs/Hide/index.tsx"),E=s("./src/reddit/models/Theme/NewColorSystem/index.ts"),P=s("./src/reddit/selectors/inFeedChaining.ts"),k=s("./src/reddit/selectors/platform.ts"),O=s("./src/reddit/selectors/posts.ts"),N=s("./src/reddit/selectors/subscriptions.ts"),S=s("./src/reddit/components/DiscoveryUnit/InFeedChaining/Post/index.tsx"),j=s("./src/reddit/components/DiscoveryUnit/InFeedChaining/Post/constants.ts"),I=s("./src/reddit/components/DiscoveryUnit/InFeedChaining/index.m.less"),_=s.n(I);function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}).apply(this,arguments)}const M=500,U=600,L={stiffness:200,damping:20},T=Object(o.c)({discoveryUnit:P.b,postChain:P.f,postSubreddit:O.T,routeName:k.r,subscribedProfiles:N.d,subscribedSubreddits:N.f}),W=Object(n.b)(T,(e,t)=>{let{listingKey:s,postId:i}=t;return{dismissPostChaining:()=>{s&&e(Object(m.e)())},openPost:t=>e(Object(v.a)(t.permalink))}});class V extends a.a.Component{constructor(e){super(e),this.showCarouselTimer=null,this.showDUTimer=null,this.showDU=()=>{this.showDUTimer=window.setTimeout(()=>{this.setState({isDUVisible:!0},this.showCarousel)},M)},this.showCarousel=()=>{this.showCarouselTimer=window.setTimeout(()=>{this.setState({isCarouselVisible:!0})},U)},this.onOverflowClick=()=>{const{discoveryUnit:e,postSubreddit:t}=this.props;e&&this.props.sendEvent(Object(f.d)(e,t))},this.onShowMeLessClick=()=>{const{discoveryUnit:e,dismissPostChaining:t,postSubreddit:s}=this.props;t(),e&&this.props.sendEvent(Object(f.a)(e,s))},this.getItemPostSubredditSubscribeEventFactory=e=>{const{discoveryUnit:t,postSubreddit:s}=this.props;if(t)return Object(f.z)(t,e,s)},this.trackDiscoveryUnitViewed=()=>{const{discoveryUnit:e,postSubreddit:t}=this.props;e&&this.props.sendEvent(Object(f.g)(e,t))},this.trackArrowClicked=e=>{const{postSubreddit:t}=this.props;this.props.sendEvent(Object(f.e)(e,void 0,t))},this.trackPostViewed=(e,t)=>{const{postSubreddit:s}=this.props;this.props.sendEvent(Object(f.B)(e,t,void 0,s))},this.trackSubredditClicked=()=>{const{discoveryUnit:e,postSubreddit:t}=this.props;e&&t&&this.props.sendEvent(Object(f.H)(e,t))},this.trackPostSubredditOrProfileClicked=e=>{const{discoveryUnit:t,postSubreddit:s}=this.props;t&&this.props.sendEvent(Object(f.y)(t,e,void 0,s))},this.openPost=(e,t)=>{this.props.openPost(t);const{discoveryUnit:s}=this.props;s&&this.trackPostViewed(s,t.id)},this.renderPost=e=>{const{discoveryUnit:t}=this.props,{subscribedProfiles:s,subscribedSubreddits:i}=this.state;return t?a.a.createElement(S.a,D({},e,{getSubscribeEventFactory:this.getItemPostSubredditSubscribeEventFactory,onClickPost:this.openPost,onSubredditOrProfileClick:this.trackPostSubredditOrProfileClicked,subscribedProfiles:s,subscribedSubreddits:i})):null},this.state={isCarouselVisible:!1,isDUVisible:!1,subscribedProfiles:e.subscribedProfiles,subscribedSubreddits:e.subscribedSubreddits}}componentDidMount(){this.trackDiscoveryUnitViewed(),this.props.routeName!==l.xb.COMMENTS&&this.setState({isCarouselVisible:!0,isDUVisible:!0})}componentDidUpdate(e){this.state.isCarouselVisible||e.routeName!==l.xb.COMMENTS||this.props.routeName===l.xb.COMMENTS||this.showDU()}componentWillUnmount(){this.showCarouselTimer&&clearTimeout(this.showCarouselTimer),this.showDUTimer&&clearTimeout(this.showDUTimer)}render(){const{discoveryUnit:e,postId:t,postChain:s,postSubreddit:r}=this.props,{isDUVisible:n,isCarouselVisible:o}=this.state;return e?a.a.createElement("div",{className:Object(c.a)(_.a.container,n&&_.a.containerVisible,this.props.className),"data-redditstyle":!0},a.a.createElement("div",{className:_.a.layout,style:{backgroundColor:Object(i.e)(-.95,Object(E.a)(this.props).navIcon)}},a.a.createElement("div",{className:_.a.header},a.a.createElement("div",{className:_.a.title},r?a.a.createElement(a.a.Fragment,null,a.a.createElement(g.c,null,"Similar communities to"),a.a.createElement(C.a,{className:_.a.subredditLink,to:r.url,onMouseDown:this.trackSubredditClicked},Object(x.b)(r.name))):a.a.createElement(g.c,null,"Similar communities")),a.a.createElement("div",{className:_.a.description},a.a.createElement(g.c,null,"Top posts from the last 24 hours")),a.a.createElement(u.b,{className:_.a.overflow,dropdownClassName:_.a.overflowDropdown,dropdownId:"chain-overflow-".concat(t),onClick:this.onOverflowClick},a.a.createElement(b.b,{className:_.a.overflowItem,displayText:Object(w.c)("Show me less of this"),iconWrapperClassName:_.a.overflowItemIconWrapper,onClick:this.onShowMeLessClick},a.a.createElement(y.a,{className:_.a.hideIcon})))),a.a.createElement("div",{className:_.a.body},a.a.createElement(p.a,{className:Object(c.a)(_.a.carousel,o&&_.a.carouselVisible),discoveryUnit:e,discoveryUnitSubreddit:r,isHidden:!o,isLoading:!1,items:s,itemWidth:j.a,leftArrowClassName:_.a.arrow,onArrowClick:this.trackArrowClicked,onPostView:this.trackPostViewed,renderPost:this.renderPost,rightArrowClassName:_.a.arrow,seed:t,shouldSlideIn:!0,springConfig:L})))):null}}t.default=Object(d.a)(W(Object(h.b)(V)))},"./src/reddit/components/DiscoveryUnit/Layout/Posts/TopPostsLargePost/index.m.less":function(e,t,s){e.exports={container:"DZ4N46-GxcZN4myRo1Jov",metaLine:"_3RsomDBMRm4zJwQoMA4H1I",bodyWrapper:"_8QyJR-f-gRDrBnB_U9d9M",mediaWrapper:"aAoswTeXSP59D_O0jbLMm",textWrapper:"_2QMHsv2ah510M8yVPnDIDo",meta:"_3OnBTLhwkjT_qb7jDZaN9k",metaWrapper:"_2kgjZeq5YSkBzbG2wBt-_",thumbnailWrapper:"_1QpRu40opbkSjXtHCoSpBr",thumbnail:"_1DSgZoQLneHjWE3l_dVvDG",thumbnailContainer:"_1cYdO4iDTKirKmKc6pjuYh",flatlist:"_15Tcsv4uOZy408GvAhSm6S",postTitle:"_20l1A0LHN5sLYdsFa4q_mv",postTitleCompact:"-si4FJBkXt7YGgVfE6_gR",flexSpacer:"oE0WBXnmx0c_cycbOzIeZ",innerContainer:"_2-GgqVSOuBRpxRqecJixsh"}},"./src/reddit/components/DiscoveryUnit/Layout/PostsCarousel/index.m.less":function(e,t,s){e.exports={topPostsLargePostsContainer:"blJHXrhp2aDTr_eU2819a",postsWrapper:"_31N1g4ul5_oWaf7McMDm4z",arrow:"_3PrQgt3ZKPk7QhsYwrdYga",arrowLeft:"_1GoqoM-Z9VRJCHgekfYoZE",arrowRight:"SGDu37agzx7_Dwp8seKWa",posts:"Fa7qwmMMPp0OdoJcQuaNG",largePost:"_2rsZ95X0CQMIjB--1M9rHS",slideIn:"_11Gk71fxo8Xiw2sUIcEJd7"}},"./src/reddit/components/DiscoveryUnit/Layout/PostsCarousel/index.tsx":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es6.symbol.js");var i=s("./node_modules/@researchgate/react-intersection-observer/lib/es/index.js"),r=s("./node_modules/react/index.js"),a=s.n(r),n=s("./node_modules/react-motion/lib/react-motion.js"),o=s("./node_modules/react-redux/es/index.js"),c=s("./src/lib/classNames/index.ts"),l=s("./src/reddit/components/DiscoveryUnit/CarouselBase/index.tsx"),d=s("./src/reddit/helpers/overlay/index.ts"),m=s("./src/reddit/helpers/trackers/discoveryUnit.ts"),p=s("./src/lib/isUrl/index.ts"),u=s("./src/lib/prettyPrintNumber/index.ts"),h=s("./src/app/strings/index.ts"),b=s("./src/lib/CSSVariableProvider/withTheme.tsx"),C=s("./node_modules/react-router-dom/esm/react-router-dom.js"),x=s("./src/lib/timeAgo/index.ts"),v=s("./src/reddit/constants/posts.ts"),f=s("./src/reddit/components/Translated/index.tsx"),g=s("./src/reddit/components/Widgets/CommunityList/helpers.ts"),w=s("./src/reddit/layout/row/Inline/index.tsx"),y=s("./src/reddit/components/DiscoveryUnit/PostAuthor/index.m.less"),E=s.n(y);var P=e=>{const t=v.a.PROFILE,s=Object(g.a)(e.author,t);return a.a.createElement("div",{className:Object(c.a)(E.a.container,e.className)},a.a.createElement(w.a,{className:E.a.layout},a.a.createElement("div",{className:E.a.textContainer},a.a.createElement("span",{className:E.a.description},a.a.createElement(f.a,{msgId:"posts.postedBy"})),a.a.createElement(C.a,{className:E.a.authorName,to:s},Object(g.b)(e.author,t)),a.a.createElement("span",{className:E.a.timestamp},Object(x.d)(e.language,e.created/1e3)))))},k=s("./src/reddit/icons/svgs/CircledPlanet/index.tsx"),O=s("./src/reddit/layout/twoCol/ExpandRight/index.tsx"),N=s("./src/reddit/components/DiscoveryUnit/PostCommunity/index.m.less"),S=s.n(N);var j=e=>{const t=Object(g.a)(e.name,e.type);return a.a.createElement("div",{className:Object(c.a)(S.a.container,e.className)},a.a.createElement(O.a,{className:S.a.layout},a.a.createElement("div",{className:S.a.iconContainer},e.iconUrl?a.a.createElement("img",{className:S.a.icon,src:e.iconUrl}):a.a.createElement(k.a,{className:S.a.planetIcon,"data-redditstyle":!0})),a.a.createElement("div",{className:S.a.textContainer},a.a.createElement(C.a,{className:S.a.name,to:t},Object(g.b)(e.displayText||e.name,e.type)),a.a.createElement("span",{className:S.a.separator},"•"),a.a.createElement("span",{className:S.a.timestamp},Object(x.d)(e.language,e.created/1e3)))))},I=s("./src/reddit/components/JSAPIContainers/index.tsx"),_=s("./src/reddit/components/Media/index.tsx"),D=s("./src/reddit/components/MiniCardPost/index.tsx"),M=s("./src/reddit/components/MiniCardPost/MetaLine/index.tsx"),U=s("./src/reddit/components/MiniCardPost/Thumbnail/index.tsx"),L=s("./src/reddit/components/PostBackgroundWrapper/index.tsx"),T=s("./src/reddit/components/PostContainer/index.tsx"),W=s("./src/reddit/components/PostTitle/index.tsx"),V=s("./src/reddit/helpers/canPreviewSelfText/index.ts"),B=s("./src/reddit/helpers/styles/mixins/index.tsx"),A=s("./src/reddit/models/Media/index.ts"),R=s("./src/reddit/models/Subreddit/index.ts"),F=s("./src/reddit/models/Widgets/index.ts"),H=s("./src/reddit/components/MiniCardPost/index.m.less"),G=s.n(H),Z=s("./src/reddit/helpers/styles/mixins/index.m.less"),Q=s.n(Z),z=s("./src/reddit/components/DiscoveryUnit/Layout/Posts/TopPostsLargePost/index.m.less"),Y=s.n(z);function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}).apply(this,arguments)}class X extends a.a.Component{render(){const{autoplayPref:e,availableWidth:t,className:s,crosspostRoot:i,crosspostSubredditOrProfile:r,eventFactory:n,flairStyleTemplate:o,forceLoadMedia:l,hideNSFWPref:d,isMiniCard:m=!0,language:b,onClickPost:C,post:x,scrollerItemRef:v,shouldPause:f,showAuthorBlock:g=!1,showMetaLine:w=!0,showSubscribeBlock:y=!1,subredditOrProfile:E}=this.props,{media:k}=i||x,O=!k&&!!x.source&&Object(p.a)(x.source.url);let N=k&&a.a.createElement(_.a,{autoplayPref:e,availableWidth:t,className:G.a.media,forceAspectRatio:A.c,imageBoxClassName:G.a.mediaImageBox,imageBoxContentImageClassName:G.a.mediaImageBoxContentImage,isListing:!0,isMiniCard:m,isNotCardView:!0,post:i||x,scrollerItemRef:v,shouldPause:f,shouldLoad:l,showCentered:!1,showFull:!1}),S=!1;k&&N&&(k.type!==A.n.RTJSON&&k.type!==A.n.TEXT?(N=a.a.createElement("div",{className:Y.a.mediaWrapper},N),S=!0):k&&k.content&&Object(V.a)(x)&&(N=a.a.createElement("div",{className:Y.a.textWrapper},N)));const D=!S&&!O;let H;return E&&(H=Object(R.d)(E)?Object(F.i)(E):Object(F.j)(E)),a.a.createElement(T.a,{className:Object(c.a)(Y.a.container,Q.a.largeAndMediumActiveStyles,Q.a.largeAndMediumPostStyles,G.a.postContainer,Object(B.a)(this.props),s),post:x,onClick:C,eventFactory:n,style:Object.assign({},Object(B.b)(this.props.flairStyleTemplate),Object(B.d)(this.props),this.props.style)},a.a.createElement(L.a,{className:G.a.backgroundWrapper,flairStyleTemplate:o},a.a.createElement("div",{className:Object(c.a)(Y.a.innerContainer,G.a.innerContainer)},y&&E&&a.a.createElement(j,J({created:x.created,language:b},H)),g&&E&&a.a.createElement(P,J({created:x.created,language:b,author:x.author},H)),a.a.createElement(W.c,{className:D?Y.a.postTitle:Y.a.postTitleCompact,disableFlair:!0,hideSourceLink:!0,post:x,size:W.b.Large,titleColor:o&&o.postTitleColor}),w&&E&&a.a.createElement(M.a,{className:Y.a.metaLine,crosspostSubredditOrProfile:r,hideNSFWPref:d,language:b,post:x,subredditOrProfile:E}),(S||O)&&a.a.createElement("div",{className:Y.a.flexSpacer}),O&&a.a.createElement("div",{className:Y.a.mediaWrapper},a.a.createElement(U.a,{className:Y.a.thumbnailWrapper,thumbnailClassName:Y.a.thumbnail,thumbnailContainerClassName:Y.a.thumbnailContainer,post:x,templatePlaceholderImage:o&&o.postPlaceholderImage})),N,a.a.createElement("div",{className:Y.a.metaWrapper},a.a.createElement("span",{className:Y.a.meta},Object(h.c)(b,"posts.points.noun",x.score,{count:Object(u.b)(x.score)})),a.a.createElement("span",{className:Y.a.meta},Object(h.c)(b,"posts.comments.noun",x.numComments,{count:Object(u.b)(x.numComments)}))))),a.a.createElement(I.d,{postId:x.id}))}}var q=Object(D.a)(Object(b.a)(X)),K=s("./src/reddit/components/DiscoveryUnit/Layout/Posts/TopPostsPlaceholder.tsx"),$=s("./src/reddit/components/DiscoveryUnit/Layout/PostsCarousel/index.m.less"),ee=s.n($),te=function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(s[i[r]]=e[i[r]])}return s};const se=326,ie=12,re={stiffness:210,damping:30},ae=100,ne=e=>{var{root:t,handleVisibilityChange:s,renderPost:r}=e,n=te(e,["root","handleVisibilityChange","renderPost"]);const o=r?r(n):a.a.createElement(q,n);return a.a.createElement(i.a,{root:t,threshold:.99,rootMargin:"0px 0px 0px 0px",onChange:s},o)},oe=Object(o.b)(null,(e,t)=>{let{discoveryUnit:s,searchDiscoveryUnit:i}=t;return{openOverlay:t=>e(Object(d.a)(t.permalink)),trackPostClick:(t,s)=>e((e,r)=>i?m.v(r(),i,t,s):null),trackPostSubredditClick:t=>e((e,r)=>s?m.x(r(),s,t):i?m.x(r(),i,t):null)}});class ce extends l.c{constructor(e){super(e),this.state={scrollIndex:0,viewableItems:{},visibleItemsCount:null},this.onClickPost=(e,t)=>{this.props.openOverlay(t),this.props.trackPostClick(t.id,this.props.searchOptions)},this.itemPostClickEventFactory=e=>{const{discoveryUnit:t,discoveryUnitSubreddit:s,searchDiscoveryUnit:i}=this.props;return(i?m.J():m.u(t,s))(e)},this.renderPost=(e,t)=>{const{isMiniCard:s,renderPost:i,singleSubredditMode:r}=this.props;return a.a.createElement(ne,{className:ee.a.largePost,eventFactory:this.itemPostClickEventFactory,forceLoadMedia:!0,isMiniCard:s,onClickPost:this.onClickPost,showAuthorBlock:!!r,showMetaLine:!1,showSubscribeBlock:!r,handleVisibilityChange:this.makeVisibilityChangeHandler(t),renderPost:i,root:this.id,key:e,postId:e})},this.renderPosts=e=>a.a.createElement("div",{className:ee.a.posts,style:e},this.props.items.map(this.renderPost)),this.id="PostsCarousel"}componentDidMount(){super.componentDidMount()}componentDidUpdate(e,t){this.state!==t&&this.trackPostsViewed(this.props)}componentWillReceiveProps(e){this.props.items!==e.items&&this.trackPostsViewed(e)}trackPostsViewed(e){if(e.isLoading||0===e.items.length)return;const t=Math.min(this.state.scrollIndex+this.getVisibleItemsCount(),this.props.items.length);e.items.slice(this.state.scrollIndex,t).forEach(t=>this.props.searchDiscoveryUnit?e.onPostView(this.props.searchDiscoveryUnit,t,e.searchOptions):this.props.discoveryUnit?e.onPostView(this.props.discoveryUnit,t):null)}trackArrowClick(){const{discoveryUnit:e,onArrowClick:t,searchDiscoveryUnit:s,searchOptions:i}=this.props,r=s||e;r&&t&&t(r,i)}onClickNext(){super.onClickNext(),this.trackArrowClick(),this.trackPostsViewed(this.props)}onClickPrev(){super.onClickPrev(),this.trackArrowClick(),this.trackPostsViewed(this.props)}render(){const{isHidden:e,leftArrowClassName:t,rightArrowClassName:s,seed:i,shouldSlideIn:r,springConfig:o}=this.props;if(this.props.isLoading||0===this.props.items.length)return a.a.createElement(K.a,{shouldUseSmallCardLayout:!1,showSubreddit:this.props.showSubreddit});const{itemWidth:d=se}=this.props,{scrollIndex:m,visibleItemsCount:p}=this.state,u=this.getMaxScrollIndex(p),h=this.getAdjustment({itemWidth:d,maxScrollIndex:u,scrollIndex:m,spacerWidth:ie,visibleItemsCount:p}),b=e?ae:this.getMarginLeft({adjustment:h,itemWidth:d,scrollIndex:m,spacerWidth:ie}),C=this.itemsFitInContainer({container:this.container,items:this.props.items,itemWidth:d,spacerWidth:ie});return a.a.createElement("div",{className:Object(c.a)(ee.a.postsWrapper,this.props.className),id:this.id,ref:this.setContainerRef},a.a.createElement(n.Motion,{defaultStyle:{marginLeft:e||r?ae:0},style:{marginLeft:Object(n.spring)(b,o||re)}},this.renderPosts),0!==m&&a.a.createElement(l.a,{className:Object(c.a)(ee.a.arrowLeft,t),onClick:this.onClickPrev,seed:i}),!C&&(null==u||m<u)&&a.a.createElement(l.b,{className:Object(c.a)(ee.a.arrowRight,r&&!e&&ee.a.slideIn,s),onClick:this.onClickNext,seed:i}))}}t.a=oe(ce)},"./src/reddit/components/DiscoveryUnit/PostAuthor/index.m.less":function(e,t,s){e.exports={layout:"_2REdLXF0mpSj8m3oeNFnQI",textContainer:"_25evCORf3YPgobOP7A0KBH",timestamp:"_12ZMpGOwwzQ5LQDmj2sycd",authorName:"_2cI137mSn1p19S7GzCn4aj",description:"_3WMX64jyXL-FNQ0kNYl267"}},"./src/reddit/components/DiscoveryUnit/PostCommunity/index.m.less":function(e,t,s){e.exports={layout:"_3w4KSJJGE7TS9xZVlkChNX",iconContainer:"_8eVKEiEgNTHopUF8DqZhu",separator:"_2dPygXwKlm02lGuxfWM6hJ",subscribeIcon:"_3C-lBXRQY9_CCGVZfQJODL",subscribeButton:"_26ierA6Rodr6VMGHkKwTPE",textContainer:"ZseEDtQar85FcCdC4sPE7",timestamp:"_3AdY0o-9CnsxnxO_VDj8Zh",icon:"_3YX9w39yU25-vbz-5gk236",planetIcon:"f6zRrQi4zqlZ4aoPrzGIN",name:"lyBM6dpYVMHQASC9SYGiO",subscribers:"uPyUGlwdDzPsq3i6O_w_G",right:"_9gZLJghZHrkIQlPvwZYDE",visitCommunity:"_1BAg1jhNwLExU7vX1TAvxR",description:"_3PWARIYmlsbZulr9sGQAVC",descriptionLine:"_2-CpYCxMGuxCYjr8tTgDTR"}},"./src/reddit/components/Widgets/CommunityList/helpers.ts":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return n}));var i=s("./src/reddit/constants/posts.ts"),r=s("./src/reddit/helpers/name/index.ts");function a(e,t){return(t===i.a.PROFILE?"/user/":"/r/")+e+"/"}function n(e,t){return t===i.a.PROFILE?Object(r.c)(e):Object(r.b)(e)}},"./src/reddit/icons/svgs/Hide/index.tsx":function(e,t,s){"use strict";var i=s("./node_modules/react/index.js"),r=s.n(i);t.a=e=>r.a.createElement("svg",{className:e.className,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},r.a.createElement("g",null,r.a.createElement("path",{d:"M10,16.25 C8.728,16.25 7.544,15.867 6.556,15.212 L15.212,6.556 C15.867,7.544 16.25,8.728 16.25,10 C16.25,13.4465 13.446,16.25 10,16.25 M3.75,10 C3.75,6.5535 6.554,3.75 10,3.75 C11.272,3.75 12.456,4.133 13.444,4.788 L4.788,13.444 C4.133,12.456 3.75,11.272 3.75,10 M10,1.25 C5.1675,1.25 1.25,5.1675 1.25,10 C1.25,14.8325 5.1675,18.75 10,18.75 C14.8325,18.75 18.75,14.8325 18.75,10 C18.75,5.1675 14.8325,1.25 10,1.25"})))}}]);
//# sourceMappingURL=InFeedChaining.08a26d8531f56b0dce66.js.map