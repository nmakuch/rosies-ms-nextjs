{"ast":null,"code":"const sgMail = require(\"@sendgrid/mail\");\n\nexport default async function (req, res) {\n  sgMail.setApiKey(process.env.SENDGRID_API_KEY);\n  const {\n    email,\n    message,\n    name,\n    phone\n  } = req.body;\n  const contentTo = {\n    to: \"makuch.nick@gmail.com\",\n    from: email,\n    subject: `New Contact form submission from ${name} - ${email}`,\n    text: message,\n    html: `<h1>New contact form submission</h1><br />\n    <h2>Personal details</h2>\n\n    <table>\n    <tr>\n      <td><h3>Name</h3></td>\n      <td><p>${name}</p></td>\n    </tr>\n    <tr>\n    <td><h3>Email</h3></td>\n    <td><p>${email}</p></td>\n    </tr>\n    <tr>\n    <td><h3>Phone&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h3></td>\n    <td><p>${phone}</p></td>\n</tr>\n  </table>\n  <br />\n    \n    <h3>User's message</h3><p>${message}</p>`\n  };\n  const contentFrom = {\n    to: email,\n    from: \"rosiesmaidservice@gmail.com\",\n    subject: `Rosie's Maid Service - Contact Us`,\n    html: `\n    <h1>Hi ${name}! Thanks for taking interest in Rosie's Maid Service</h1>\n    <br /><h2>We have recieved your message and will get back to you shortly :)</h2>\n    <p>It usually takes us 2 hours to get back to clients (unless we are experiencing periods of high traffic).</p>\n\n    <h2>You can view your submission below</h2>\n    \n    <h3>Personal details</h3>\n\n    <table>\n    <tr>\n      <td><h3>Name</h3></td>\n      <td><p>${name}</p></td>\n    </tr>\n    <tr>\n    <td><h3>Email</h3></td>\n    <td><p>${email}</p></td>\n    </tr>\n    <tr>\n    <td><h3>Phone&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h3></td>\n    <td><p>${phone}</p></td>\n</tr>\n  </table>\n  <br />\n    \n    <h3>Your message</h3><p>${message}</p>\n    `\n  };\n\n  try {\n    await sgMail.send(contentTo);\n    await sgMail.send(contentFrom);\n    res.status(200).send(\"Message sent successfully.\");\n  } catch (error) {\n    console.log(\"ERROR\", error);\n    res.status(400).send(\"Message not sent.\");\n  }\n}","map":{"version":3,"sources":["/Users/nickmakuch/Documents/Code/rosies-ms-nextjs/pages/api/send.js"],"names":["sgMail","require","req","res","setApiKey","process","env","SENDGRID_API_KEY","email","message","name","phone","body","contentTo","to","from","subject","text","html","contentFrom","send","status","error","console","log"],"mappings":"AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,gBAAD,CAAtB;;AAEA,eAAe,gBAAeC,GAAf,EAAoBC,GAApB,EAAyB;AACtCH,EAAAA,MAAM,CAACI,SAAP,CAAiBC,OAAO,CAACC,GAAR,CAAYC,gBAA7B;AAEA,QAAM;AAAEC,IAAAA,KAAF;AAASC,IAAAA,OAAT;AAAkBC,IAAAA,IAAlB;AAAwBC,IAAAA;AAAxB,MAAkCT,GAAG,CAACU,IAA5C;AAEA,QAAMC,SAAS,GAAG;AAChBC,IAAAA,EAAE,EAAE,uBADY;AAEhBC,IAAAA,IAAI,EAAEP,KAFU;AAGhBQ,IAAAA,OAAO,EAAG,oCAAmCN,IAAK,MAAKF,KAAM,EAH7C;AAIhBS,IAAAA,IAAI,EAAER,OAJU;AAKhBS,IAAAA,IAAI,EAAG;;;;;;eAMIR,IAAK;;;;aAIPF,KAAM;;;;aAING,KAAM;;;;;gCAKaF,OAAQ;AAxBpB,GAAlB;AA2BA,QAAMU,WAAW,GAAG;AAClBL,IAAAA,EAAE,EAAEN,KADc;AAElBO,IAAAA,IAAI,EAAE,6BAFY;AAGlBC,IAAAA,OAAO,EAAG,mCAHQ;AAIlBE,IAAAA,IAAI,EAAG;aACER,IAAK;;;;;;;;;;;eAWHA,IAAK;;;;aAIPF,KAAM;;;;aAING,KAAM;;;;;8BAKWF,OAAQ;;AA7BhB,GAApB;;AAkCA,MAAI;AACF,UAAMT,MAAM,CAACoB,IAAP,CAAYP,SAAZ,CAAN;AACA,UAAMb,MAAM,CAACoB,IAAP,CAAYD,WAAZ,CAAN;AACAhB,IAAAA,GAAG,CAACkB,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB,4BAArB;AACD,GAJD,CAIE,OAAOE,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBF,KAArB;AACAnB,IAAAA,GAAG,CAACkB,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB,mBAArB;AACD;AACF","sourcesContent":["const sgMail = require(\"@sendgrid/mail\");\n\nexport default async function(req, res) {\n  sgMail.setApiKey(process.env.SENDGRID_API_KEY);\n\n  const { email, message, name, phone } = req.body;\n\n  const contentTo = {\n    to: \"makuch.nick@gmail.com\",\n    from: email,\n    subject: `New Contact form submission from ${name} - ${email}`,\n    text: message,\n    html: `<h1>New contact form submission</h1><br />\n    <h2>Personal details</h2>\n\n    <table>\n    <tr>\n      <td><h3>Name</h3></td>\n      <td><p>${name}</p></td>\n    </tr>\n    <tr>\n    <td><h3>Email</h3></td>\n    <td><p>${email}</p></td>\n    </tr>\n    <tr>\n    <td><h3>Phone&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h3></td>\n    <td><p>${phone}</p></td>\n</tr>\n  </table>\n  <br />\n    \n    <h3>User's message</h3><p>${message}</p>`\n  };\n\n  const contentFrom = {\n    to: email,\n    from: \"rosiesmaidservice@gmail.com\",\n    subject: `Rosie's Maid Service - Contact Us`,\n    html: `\n    <h1>Hi ${name}! Thanks for taking interest in Rosie's Maid Service</h1>\n    <br /><h2>We have recieved your message and will get back to you shortly :)</h2>\n    <p>It usually takes us 2 hours to get back to clients (unless we are experiencing periods of high traffic).</p>\n\n    <h2>You can view your submission below</h2>\n    \n    <h3>Personal details</h3>\n\n    <table>\n    <tr>\n      <td><h3>Name</h3></td>\n      <td><p>${name}</p></td>\n    </tr>\n    <tr>\n    <td><h3>Email</h3></td>\n    <td><p>${email}</p></td>\n    </tr>\n    <tr>\n    <td><h3>Phone&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h3></td>\n    <td><p>${phone}</p></td>\n</tr>\n  </table>\n  <br />\n    \n    <h3>Your message</h3><p>${message}</p>\n    `\n  };\n\n\n  try {\n    await sgMail.send(contentTo);\n    await sgMail.send(contentFrom);\n    res.status(200).send(\"Message sent successfully.\");\n  } catch (error) {\n    console.log(\"ERROR\", error);\n    res.status(400).send(\"Message not sent.\");\n  }\n}\n"]},"metadata":{},"sourceType":"module"}